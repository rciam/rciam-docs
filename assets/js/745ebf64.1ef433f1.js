"use strict";(self.webpackChunkrciam_docs=self.webpackChunkrciam_docs||[]).push([[384],{3905:function(t,e,a){a.d(e,{Zo:function(){return m},kt:function(){return h}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),d=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},m=function(t){var e=d(t.components);return n.createElement(p.Provider,{value:e},t.children)},s={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,p=t.parentName,m=l(t,["components","mdxType","originalType","parentName"]),k=d(a),h=r,c=k["".concat(p,".").concat(h)]||k[h]||s[h]||i;return a?n.createElement(c,o(o({ref:e},m),{},{components:a})):n.createElement(c,o({ref:e},m))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=k;var l={};for(var p in e)hasOwnProperty.call(e,p)&&(l[p]=e[p]);l.originalType=t,l.mdxType="string"==typeof t?t:r,o[1]=l;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},1678:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return d},toc:function(){return m},default:function(){return k}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],l={sidebar_position:1},p="Service Providers",d={unversionedId:"developer/guide-for-sps",id:"developer/guide-for-sps",isDocsHomePage:!1,title:"Service Providers",description:"This page contains information about connecting services to",source:"@site/docs/developer/guide-for-sps.md",sourceDirName:"developer",slug:"/developer/guide-for-sps",permalink:"/rciam-docs/docs/developer/guide-for-sps",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/developer/guide-for-sps.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"VOMS",permalink:"/rciam-docs/docs/manager/voms"},next:{title:"Identity Providers",permalink:"/rciam-docs/docs/developer/guide-for-idps"}},m=[{value:"Service Provider integration workflow",id:"service-provider-integration-workflow",children:[]},{value:"General Information",id:"general-information",children:[]},{value:"SAML Service Provider",id:"saml-service-provider",children:[{value:"Metadata registration",id:"metadata-registration",children:[]},{value:"Metadata",id:"metadata",children:[]},{value:"Attributes",id:"attributes",children:[]},{value:"Attribute-based authorisation",id:"attribute-based-authorisation",children:[]},{value:"References",id:"references",children:[]}]},{value:"OpenID Connect Service Provider",id:"openid-connect-service-provider",children:[{value:"Client registration",id:"client-registration",children:[]},{value:"Claims",id:"claims",children:[]},{value:"Grant Types",id:"grant-types",children:[]},{value:"Endpoints",id:"endpoints",children:[]},{value:"Claims-based authorisation",id:"claims-based-authorisation",children:[]},{value:"Example OIDC Client",id:"example-oidc-client",children:[]}]},{value:"User attributes",id:"user-attributes",children:[{value:"1. RCIAM ID",id:"1-rciam-id",children:[]},{value:"2. Display Name",id:"2-display-name",children:[]},{value:"3. Given Name",id:"3-given-name",children:[]},{value:"4. Family Name",id:"4-family-name",children:[]},{value:"5. Username",id:"5-username",children:[]},{value:"6. Email Address",id:"6-email-address",children:[]},{value:"7. Verified email flag",id:"7-verified-email-flag",children:[]},{value:"8. Verified email list",id:"8-verified-email-list",children:[]},{value:"9. Affiliation",id:"9-affiliation",children:[]},{value:"10. Groups",id:"10-groups",children:[]},{value:"11. Capabilities",id:"11-capabilities",children:[]},{value:"12. Assurance",id:"12-assurance",children:[]},{value:"13. SSH Public Key",id:"13-ssh-public-key",children:[]}]},{value:"User authorisation",id:"user-authorisation",children:[{value:"VO/group membership and role information",id:"vogroup-membership-and-role-information",children:[]},{value:"Capabilities",id:"capabilities",children:[]},{value:"Identity Assurance",id:"identity-assurance",children:[]}]}],s={toc:m};function k(t){var e=t.components,a=(0,r.Z)(t,o);return(0,i.kt)("wrapper",(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"service-providers"},"Service Providers"),(0,i.kt)("p",null,"This page contains information about connecting services to\nRCIAM in order to allow user\nlogin through RCIAM and to receive users' attributes. RCIAM is connected\nto a wide range of academic and social Identity Providers that users can choose\nfrom in order to access your service."),(0,i.kt)("h2",{id:"service-provider-integration-workflow"},"Service Provider integration workflow"),(0,i.kt)("p",null,"To integrate your Service Provider with the RCIAM service, you need to\ncreate a registration request using the\n",(0,i.kt)("a",{parentName:"p",href:"https://federation-demo.rciam.grnet.gr"},"RCIAM Federation Registry Portal"),". You\ncan also use the Federation Registry portal to request the reconfiguration or\nderegistration of an existing deployed service. Service registration requests\ntypically require approval by an administrator. Please refer to the\n",(0,i.kt)("a",{parentName:"p",href:"https://federation.rciam.grnet.gr/docs"},"Federation Registry Documentation")," for\nmore information."),(0,i.kt)("p",null,"The integration follows a two-step process:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Register your Service Provider and test integration with the ",(0,i.kt)("strong",{parentName:"li"},"demo"),'\ninstance of RCIAM by selecting the "Demo" integration environment\nduring registration through the RCIAM Federation Registry Portal. The demo\ninstance allows for testing authentication and authorisation through the\nacademic and social Identity Providers connected to RCIAM without\naffecting the production RCIAM service. Note that while the demo instance\nhas identical functionality to the production instance, no information is\nshared between the two systems.'),(0,i.kt)("li",{parentName:"ol"},"Register your Service Provider with the ",(0,i.kt)("strong",{parentName:"li"},"production"),' instance of RCIAM\nby selecting the "Production" integration environment during\nregistration through the RCIAM Federation Registry Portal. The production\ninstance allows access to your service through the academic and social\nIdentity Providers connected to RCIAM. This requires that your service\nintegration has been thoroughly tested during Step 1.')),(0,i.kt)("p",null,"The most important URLs for each environment are listed in the table below but\nmore information can be found in the protocol-specific sections that follow."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Protocol"),(0,i.kt)("th",{parentName:"tr",align:null},"Demo environment"),(0,i.kt)("th",{parentName:"tr",align:null},"Production environment"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SAML"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/proxy/saml2/idp/metadata.php"},"https://rciam-demo.example.org/proxy/saml2/idp/metadata.php")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/proxy/saml2/idp/metadata.php"},"https://rciam.example.org/proxy/saml2/idp/metadata.php"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"OpenID Connect"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/.well-known/openid-configuration"},"https://rciam-demo.example.org/oidc/.well-known/openid-configuration")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/.well-known/openid-configuration"},"https://rciam.example.org/oidc/.well-known/openid-configuration"))))),(0,i.kt)("h2",{id:"general-information"},"General Information"),(0,i.kt)("p",null,"RCIAM supports two authentication and authorisation protocols that you\ncan choose from:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html"},"Security Assertion Markup Language (SAML) 2.0")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://openid.net/specs/openid-connect-core-1_0.html"},"OpenID Connect")," - an\nextension to ",(0,i.kt)("a",{parentName:"li",href:"https://tools.ietf.org/html/rfc6749"},"OAuth 2.0"))),(0,i.kt)("p",null,"Regardless of which of the two protocols you are going to use, you need to\nprovide the following information to connect your service to RCIAM:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Name of the service (in English and optionally in other languages supported\nby the service)"),(0,i.kt)("li",{parentName:"ol"},"Short description of the service"),(0,i.kt)("li",{parentName:"ol"},"Website (URL) for localised information about the service; the content found\nat the URL SHOULD provide more complete information than what provided by the\ndescription"),(0,i.kt)("li",{parentName:"ol"},"Contact information of the following types:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Helpdesk/Support contact information (for redirecting user)"),(0,i.kt)("li",{parentName:"ul"},"Administrative"),(0,i.kt)("li",{parentName:"ul"},"Technical"),(0,i.kt)("li",{parentName:"ul"},"Security/incident response"))),(0,i.kt)("li",{parentName:"ol"},"Privacy statement URL: The privacy policy is used to document the data\ncollected and processed by the service. You can use the\n",(0,i.kt)("a",{parentName:"li",href:"https://docs.google.com/document/d/1ZU7VjH3g7qcfWcz0Z8TTv-vQiVoRA_wOsuMyJaz28Og/edit"},"Privacy Policy template")),(0,i.kt)("li",{parentName:"ol"},"Logo URL (optional for showing in catalogues); if provided, logos SHOULD:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"use a transparent background where appropriate to facilitate the usage of\nlogos within a user interface"),(0,i.kt)("li",{parentName:"ul"},"use PNG, or GIF (less preferred), images"),(0,i.kt)("li",{parentName:"ul"},"use HTTPS URLs in order to avoid mixed-content warnings within browsers"),(0,i.kt)("li",{parentName:"ul"},"have a size larger than 40000 and smaller than 50000 characters when\nencoded in base64"))),(0,i.kt)("li",{parentName:"ol"},"Country of the service"),(0,i.kt)("li",{parentName:"ol"},"Compliance with the policies")),(0,i.kt)("h2",{id:"saml-service-provider"},"SAML Service Provider"),(0,i.kt)("p",null,"To enable federated access to a web-based application, you can connect to the\nRCIAM IdP as a SAML Service Provider (SP). Users of the application will\nbe redirected to RCIAM in order to log in, and RCIAM can authenticate them\nusing any of the supported backend authentication mechanisms, such as\ninstitutional IdPs registered with eduGAIN or Social Providers. Once the user is\nauthenticated, RCIAM will return a SAML assertion to the application\ncontaining information about the authenticated user."),(0,i.kt)("h3",{id:"metadata-registration"},"Metadata registration"),(0,i.kt)("p",null,"SAML authentication relies on the use of metadata. Both parties (you as a SP and\nthe RCIAM IdP) need to exchange metadata in order to know and trust each\nother. The metadata include information such as the location of the service\nendpoints that need to be invoked, as well as the certificates that will be used\nto sign SAML messages. The format of the exchanged metadata should be based on\nthe XML-based\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf"},"SAML 2.0 specification"),".\nUsually, you will not need to manually create such an XML document, as this is\nautomatically generated by all major SAML 2.0 SP software solutions (e.g.,\nShibboleth, SimpleSAMLphp, and ",(0,i.kt)("inlineCode",{parentName:"p"},"mod_auth_mellon"),"). It is important that you\nserve your metadata over HTTPS using a browser-friendly SSL certificate, i.e.\nissued by a trusted certificate authority."),(0,i.kt)("p",null,"You can get the metadata of the RCIAM IdP Proxy on a dedicated URL that\ndepends on the integration environment being used:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Demo environment"),(0,i.kt)("th",{parentName:"tr",align:null},"Production environment"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/proxy/saml2/idp/metadata.php"},"https://rciam-demo.example.org/proxy/saml2/idp/metadata.php")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/proxy/saml2/idp/metadata.php"},"https://rciam.example.org/proxy/saml2/idp/metadata.php"))))),(0,i.kt)("p",null,"To register your SAML SP, you must submit a service registration request at\n",(0,i.kt)("a",{parentName:"p",href:"https://federation-demo.rciam.grnet.gr"},"Federation Registry"),". Your request should\ninclude the general information about your service (see\n",(0,i.kt)("a",{parentName:"p",href:"#general-information"},"General Information"),") and the SP's metadata and entity\nid."),(0,i.kt)("h3",{id:"metadata"},"Metadata"),(0,i.kt)("p",null,"Metadata provided by your SP should contain a descriptive name of the service\nthat your SP represents in at least English. It is recommended to also provide\nthe name in other languages which are commonly used in the geographic scope of\nthe deployment. The name should be placed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"<md:ServiceName>")," in the\n",(0,i.kt)("inlineCode",{parentName:"p"},"<md:AttributeConsumingService>")," container."),(0,i.kt)("p",null,"It is recommended that the ",(0,i.kt)("inlineCode",{parentName:"p"},"<md:IDPSSODescriptor>")," element included in your SP\nmetadata contains both an ",(0,i.kt)("inlineCode",{parentName:"p"},"AuthnRequestsSigned")," and an ",(0,i.kt)("inlineCode",{parentName:"p"},"WantAssertionsSigned"),"\nattribute set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,i.kt)("p",null,"Your SP metadata should also contain contact information for support and for a\ntechnical contact. The ",(0,i.kt)("inlineCode",{parentName:"p"},"<md:EntityDescriptor>")," element should contain both a\n",(0,i.kt)("inlineCode",{parentName:"p"},"<md:ContactPerson>")," element with a ",(0,i.kt)("inlineCode",{parentName:"p"},"contactType")," of ",(0,i.kt)("inlineCode",{parentName:"p"},'"support"')," and a\n",(0,i.kt)("inlineCode",{parentName:"p"},"<md:ContactPerson>")," element with a ",(0,i.kt)("inlineCode",{parentName:"p"},"contactType")," of ",(0,i.kt)("inlineCode",{parentName:"p"},'"technical"'),". The\n",(0,i.kt)("inlineCode",{parentName:"p"},"<md:ContactPerson>")," elements should contain at least one ",(0,i.kt)("inlineCode",{parentName:"p"},"<md:EmailAddress>"),".\nThe support address may be used for generic support questions about the service,\nwhile the technical contact may be contacted regarding technical\ninteroperability problems. The technical contact must be responsible for the\ntechnical operation of the service represented by your SP."),(0,i.kt)("h3",{id:"attributes"},"Attributes"),(0,i.kt)("p",null,"The RCIAM IdP is guaranteed to release a minimal subset of the\n",(0,i.kt)("a",{parentName:"p",href:"https://refeds.org/category/research-and-scholarship"},"REFEDS R&S")," attribute\nbundle to connected Service Providers without administrative involvement,\nsubject to user consent. The following attributes constitute a minimal subset of\nthe R&S attribute bundle:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Persistent, non-reassignable, non-targeted, opaque, globally unique RCIAM user\nID (",(0,i.kt)("inlineCode",{parentName:"li"},"eduPersonUniqueId"),"); this is always scoped ",(0,i.kt)("inlineCode",{parentName:"li"},"@example.org")),(0,i.kt)("li",{parentName:"ul"},"Email address (",(0,i.kt)("inlineCode",{parentName:"li"},"mail"),")"),(0,i.kt)("li",{parentName:"ul"},"Display name (",(0,i.kt)("inlineCode",{parentName:"li"},"displayName"),") OR (",(0,i.kt)("inlineCode",{parentName:"li"},"givenName")," AND ",(0,i.kt)("inlineCode",{parentName:"li"},"sn"),")")),(0,i.kt)("p",null,"A more extensive list of all the attributes that may be made available to\nService Providers is included in the ",(0,i.kt)("a",{parentName:"p",href:"#user-attributes"},"User Attribute")," section."),(0,i.kt)("h3",{id:"attribute-based-authorisation"},"Attribute-based authorisation"),(0,i.kt)("p",null,"RCIAM provides information about the authenticated user that may be used\nby Service Providers in order to control user access to resources. This\ninformation is provided by the RCIAM IdP in the\n",(0,i.kt)("a",{parentName:"p",href:"#attributes"},"SAML attribute assertion"),". The table below lists the SAML\nattributes that are relevant for user authorisation:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"SAML Attribute"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#vogroup-membership-and-role-information"},"VO/group membership/roles of the authenticated user")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduPersonEntitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#capabilities"},"Capabilities")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduPersonEntitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#identity-assurance"},"Identity Assurance")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduPersonAssurance"))))),(0,i.kt)("h3",{id:"references"},"References"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://shibboleth.atlassian.net/wiki/spaces/SP3/overview"},"Shibboleth Service Provider Documentation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://simplesamlphp.org/docs/stable/simplesamlphp-sp"},"SimpleSAMLphp Service Provider QuickStart")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/latchset/mod_auth_mellon"},"Simple SAML 2.0 service provider with mod_auth_mellon Apache module"))),(0,i.kt)("h2",{id:"openid-connect-service-provider"},"OpenID Connect Service Provider"),(0,i.kt)("p",null,"Service Providers can be integrated with RCIAM using OpenID Connect\n(OIDC) as an alternative to the SAML2 protocol. To allow this, the RCIAM\nIdP provides an OpenID Connect (OAuth2) API based on\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server"},"MITREid Connect"),",\nwhich has been\n",(0,i.kt)("a",{parentName:"p",href:"http://openid.net/certification/"},"certified by the OpenID Foundation"),".\nInterconnection with the RCIAM OIDC Provider allows users to sign in\nusing any of the supported backend authentication mechanisms, such as\ninstitutional IdPs registered with eduGAIN or Social Providers. Once the user\nhas signed in, RCIAM can return OIDC Claims containing information about\nthe authenticated user."),(0,i.kt)("h3",{id:"client-registration"},"Client registration"),(0,i.kt)("p",null,"Before your service can use the RCIAM OIDC Provider for user login, you\nmust submit a service registration request using\n",(0,i.kt)("a",{parentName:"p",href:"https://federation-demo.rciam.grnet.gr"},"Federation Registry")," in order to\nobtain OAuth 2.0 credentials. The client configuration should include the\ngeneral information about your service, as described in\n",(0,i.kt)("a",{parentName:"p",href:"#general-information"},"General Information")," section."),(0,i.kt)("h4",{id:"obtaining-oauth-20-credentials"},"Obtaining OAuth 2.0 credentials"),(0,i.kt)("p",null,"You need OAuth 2.0 credentials, which typically include a client ID and client\nsecret, to authenticate users through the RCIAM OIDC Provider."),(0,i.kt)("p",null,"You can specify the client ID and secret when creating/editing your client or\nlet them being automatically generated during registration (",(0,i.kt)("em",{parentName:"p"},"recommended"),")."),(0,i.kt)("p",null,"To find the ID and secret of your client, do the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Select your client from the\n",(0,i.kt)("a",{parentName:"li",href:"https://federation-demo.rciam.grnet.gr"},"Manage Services Page"),"."),(0,i.kt)("li",{parentName:"ol"},"Look for the ",(0,i.kt)("strong",{parentName:"li"},"Client ID")," in the ",(0,i.kt)("strong",{parentName:"li"},"Protocol")," tab."),(0,i.kt)("li",{parentName:"ol"},"Select the ",(0,i.kt)("strong",{parentName:"li"},"Display/edit client secret:")," option from the ",(0,i.kt)("strong",{parentName:"li"},"Protocol")," tab.")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can copy these values using the green copy button next to the desired field."))),(0,i.kt)("h4",{id:"setting-one-or-more-redirection-uris"},"Setting one or more Redirection URIs"),(0,i.kt)("p",null,"The Redirection URI(s) that you set when creating/editing your client determine\nwhere the RCIAM OIDC Provider sends responses to your authentication\nrequests. Note that the Redirection URI MUST use the ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," scheme; the use of\n",(0,i.kt)("inlineCode",{parentName:"p"},"http")," Redirection URIs is only allowed in the demo environment."),(0,i.kt)("p",null,"To find the Redirection URI(s) for your client, do the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open the ",(0,i.kt)("a",{parentName:"li",href:"https://federation-demo.rciam.grnet.gr"},"Manage Services")),(0,i.kt)("li",{parentName:"ol"},"Find the redirect URIs for your client listed under the ",(0,i.kt)("strong",{parentName:"li"},"Protocol")," column\nof the overview table or ",(0,i.kt)("strong",{parentName:"li"},"Edit")," the particular client and look for the\n",(0,i.kt)("strong",{parentName:"li"},"Redirect URI(s)")," in the ",(0,i.kt)("strong",{parentName:"li"},"Protocol")," tab.")),(0,i.kt)("h4",{id:"setting-additional-information-about-the-client"},"Setting additional information about the client"),(0,i.kt)("p",null,"It is strongly suggested that you add a short ",(0,i.kt)("strong",{parentName:"p"},"description")," and a ",(0,i.kt)("strong",{parentName:"p"},"logo")," for\nthe client. Lastly, you need to set the email addresses of one or more contacts."),(0,i.kt)("h3",{id:"claims"},"Claims"),(0,i.kt)("p",null,"The RCIAM UserInfo Endpoint is an OAuth 2.0 Protected Resource that\nreturns specific information about the authenticated End-User as Claim Values.\nTo obtain the requested Claims about the End-User, the Client makes a request to\nthe UserInfo Endpoint using an Access Token obtained through OpenID Connect\nAuthentication. The scopes associated with the Access Token used to access the\nRCIAM UserInfo Endpoint will determine what Claims will be released.\nThese Claims are represented by a JSON object that contains a collection of name\nand value pairs for the Claims."),(0,i.kt)("p",null,"The following scope values can be used to request Claims from the RCIAM\nUserInfo Endpoint:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Scope"),(0,i.kt)("th",{parentName:"tr",align:null},"Claims"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"openid")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"sub"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"profile")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"name")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"given_name")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"family_name")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"preferred_username"))))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"email")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"email")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"email_verified")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"voperson_verified_email"))))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_scoped_affiliation")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_scoped_affiliation"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))))),(0,i.kt)("p",null,"A more extensive list of all the attributes that may be made available to\nService Providers is included in the ",(0,i.kt)("a",{parentName:"p",href:"#user-attributes"},"User Attribute")," section."),(0,i.kt)("h3",{id:"grant-types"},"Grant Types"),(0,i.kt)("p",null,"RCIAM supports the following OpenID Connect/OAuth2 grant types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Authorization Code: used by Web Apps executing on a server."),(0,i.kt)("li",{parentName:"ul"},"Token Exchange: used by clients to request and obtain security tokens in\nsupport of delegated access to resources."),(0,i.kt)("li",{parentName:"ul"},"Device Code: used by devices that lack a browser to perform a user-agent based\nOAuth flow.")),(0,i.kt)("h3",{id:"endpoints"},"Endpoints"),(0,i.kt)("p",null,"The most important OIDC/OAuth2 endpoints are listed below:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Endpoint"),(0,i.kt)("th",{parentName:"tr",align:null},"Demo environment"),(0,i.kt)("th",{parentName:"tr",align:null},"Production environment"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Provider configuration"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/.well-known/openid-configuration"},"https://rciam-demo.example.org/oidc/.well-known/openid-configuration")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/.well-known/openid-configuration"},"https://rciam.example.org/oidc/.well-known/openid-configuration"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Client registration"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://federation-demo.rciam.grnet.gr"},"https://federation-demo.rciam.grnet.gr")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://federation-demo.rciam.grnet.gr"},"https://federation-demo.rciam.grnet.gr"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Authorisation"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/authorize"},"https://rciam-demo.example.org/oidc/authorize")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/authorize"},"https://rciam.example.org/oidc/authorize"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Token"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/token"},"https://rciam-demo.example.org/oidc/token")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/token"},"https://rciam.example.org/oidc/token"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Device Code"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/devicecode"},"https://rciam-demo.example.org/oidc/devicecode")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/devicecode"},"https://rciam.example.org/oidc/devicecode"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"JSON Web Key(jwt)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/jwk"},"https://rciam-demo.example.org/oidc/jwk")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/jwk"},"https://rciam.example.org/oidc/jwk"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"User Info"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/userinfo"},"https://rciam-demo.example.org/oidc/userinfo")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/userinfo"},"https://rciam.example.org/oidc/userinfo"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Introspection"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam-demo.example.org/oidc/introspect"},"https://rciam-demo.example.org/oidc/introspect")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://rciam.example.org/oidc/introspect"},"https://rciam.example.org/oidc/introspect"))))),(0,i.kt)("h4",{id:"authorization-endpoint"},"Authorization Endpoint"),(0,i.kt)("p",null,"The Authorization Endpoint performs Authentication of the End-User. This is done\nby sending the User Agent to the Authorization Server\\'s Authorization Endpoint\nfor Authentication and Authorization, using request parameters defined by OAuth\n2.0 and additional parameters and parameter values defined by OpenID Connect."),(0,i.kt)("p",null,"The request parameters of the Authorization endpoint are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"client_id"),": id of the client that ask for authentication to the Authorization\nServer."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"redirect_uri"),": URI to which the response will be sent."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"scope"),": A list of attributes that the application requires."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"state"),": Opaque value used to maintain state between the request and the\ncallback."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"response_type"),": value that determines the authorization processing flow to be\nused. For ",(0,i.kt)("strong",{parentName:"li"},"Authorization Code")," grant set ",(0,i.kt)("inlineCode",{parentName:"li"},"response_type=code"),". This way the\nresponse will include an authorization code.")),(0,i.kt)("h4",{id:"token-endpoint"},"Token Endpoint"),(0,i.kt)("p",null,"To obtain an Access Token, an ID Token, and optionally a Refresh Token, the\nClient sends a Token Request to the Token Endpoint."),(0,i.kt)("p",null,"Depending on the grant type, the following parameters are required:"),(0,i.kt)("h5",{id:"authorization-code"},"Authorization Code"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence"),(0,i.kt)("th",{parentName:"tr",align:null},"Values"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"authorization_code"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"code")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The value of the code in the response from authorization endpoint.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"redirect_uri")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"URI to which the response will be sent (must be the same as the request to authorization endpoint)")))),(0,i.kt)("h5",{id:"proof-key-for-code-exchange-pkce"},"Proof Key for Code Exchange (PKCE)"),(0,i.kt)("p",null,"The Proof Key for Code Exchange (PKCE, pronounced pixie) extension\n(",(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7636"},"RFC 7636"),") describes a technique for\npublic clients (clients without ",(0,i.kt)("inlineCode",{parentName:"p"},"client_secret"),") to mitigate the threat of\nhaving the authorization code intercepted. The technique involves the client\nfirst creating a secret, and then using that secret again when exchanging the\nauthorization code for an access token. This way if the code is intercepted, it\nwill not be useful since the token request relies on the initial secret."),(0,i.kt)("h6",{id:"client-configuration"},"Client configuration"),(0,i.kt)("p",null,"To enable PKCE you need to go to the\n",(0,i.kt)("a",{parentName:"p",href:"https://federation-demo.rciam.grnet.gr"},"Manage Services Page"),' and create/edit\na client.\nIn "Protocol" tab under "Token Endpoint Authentication Method" select "No\nauthentication" and in "Crypto" tab under "Proof Key for Code Exchange (PKCE)\nCode Challenge Method" select "SHA-256 hash algorithm".'),(0,i.kt)("h6",{id:"protocol-flow"},"Protocol Flow"),(0,i.kt)("p",null,"Because the PKCE-enhanced Authorization Code Flow builds upon the standard\nAuthorization Code Flow, the steps are very similar."),(0,i.kt)("p",null,"First, the client creates and records a secret named the ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier"),". The\n",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," is a high-entropy cryptographic random STRING using the\nunreserved characters ","[A-Z]"," / ","[a-z]"," / ","[0-9]",' / "-" / "." / "',"_",'" / "~", with a\nminimum length of 43 characters and a maximum length of 128 characters. Then the\nclient creates a ',(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge")," derived from the ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," by using one\nof the following transformations on the code verifier:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"plain")," code_challenge = code_verifier"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"S256")," code_challenge = BASE64URL-ENCODE(SHA256(ASCII(code_verifier)))")),(0,i.kt)("p",null,"If the client is capable of using ",(0,i.kt)("inlineCode",{parentName:"p"},"S256"),", it MUST use ",(0,i.kt)("inlineCode",{parentName:"p"},"S256"),". Clients are\npermitted to use ",(0,i.kt)("inlineCode",{parentName:"p"},"plain")," only if they cannot support ",(0,i.kt)("inlineCode",{parentName:"p"},"S256")," for some technical\nreason."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"There are various tools that generate these values such as\n",(0,i.kt)("a",{parentName:"p",href:"https://tonyxu-io.github.io/pkce-generator/"},"https://tonyxu-io.github.io/pkce-generator/")))),(0,i.kt)("p",null,"Then the ",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge")," is sent in the Authorization Request along with the\ntransformation method (",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge_method"),")."),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'GET "${AUTHORISATION_ENDPOINT}?\n      client_id=${CLIENT_ID}\n      &scope=openid%20profile%20email\n      &redirect_uri=${REDIRECT_URI}\n      &response_type=code\n      &code_challenge=${CODE_CHALLENGE}\n      &code_challenge_method=S256"\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Authorisation Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"The Authorization Endpoint responds as usual but records ",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge")," and\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge_method"),"."),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"HTTP/1.1 302 Found\n  Location: ${REDIRECT_URI}?\n    code=fgtLHT\n")),(0,i.kt)("p",null,"The client then sends the authorization code in the Access Token Request as\nusual but includes the ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," secret generated in the first request."),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST "${TOKEN_ENDPOINT}" \\\n  -d "grant_type=authorization_code" \\\n  -d "code=${CODE}" \\\n  -d "client_id=${CLIENT_ID}" \\\n  -d "redirect_uri=${REDIRECT_URI}" \\\n  -d "code_verifier=${CODE_VERIFIER}" | python -m json.tool\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"The authorization server transforms ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," and compares it to\n",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge")," from the first request. Access is denied if they are not equal."),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJraWQiOiJvaWRjIiwiYWxnIjoiUlMyNTYifQ...",\n  "expires_in": 3599,\n  "id_token": "eyJraWQiOiJvaWRjIiwiYWxnIjoiUlMyNTYifQ...",\n  "scope": "openid email profile",\n  "token_type": "Bearer"\n}\n')),(0,i.kt)("h5",{id:"refresh-request"},"Refresh request"),(0,i.kt)("p",null,"The following request allows obtaining an access token from a refresh token\nusing the ",(0,i.kt)("inlineCode",{parentName:"p"},"grant_type")," value ",(0,i.kt)("inlineCode",{parentName:"p"},"refresh_token"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence"),(0,i.kt)("th",{parentName:"tr",align:null},"Values"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The identifier of the client.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_secret")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The secret value of the client.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"refresh_token"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"refresh_token")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"The value of the refresh token"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"scope")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"This parameter should contain openid at least")))),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl\xa0-X\xa0POST "${TOKEN_ENDPOINT}" \\\n  -u\xa0"${CLIENT_ID}":"${CLIENT_SECRET}"\xa0\\\n  -d\xa0"grant_type=refresh_token"\xa0\\\n  -d\xa0"refresh_token=${REFRESH_TOKEN}"\xa0\\\n  -d\xa0"scope=openid%20email%20profile"\xa0|\xa0python\xa0-m\xa0json.tool;\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJraWQiOiJvaWRjIiwiYWx...",\n  "expires_in": 3599,\n  "id_token": "eyJraWQiOiJvaWRjIiwiYW...",\n  "refresh_token": "eyJhbGciOiJub25...",\n  "scope": "openid\xa0profile\xa0email",\n  "token_type": "Bearer"\n}\n')),(0,i.kt)("h6",{id:"refresh-request-with-pkce"},"Refresh Request with PKCE"),(0,i.kt)("p",null,"To combine the refresh token grant type with PKCE you need to make the following\nrequest:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl\xa0-X\xa0POST\xa0"${TOKEN_ENDPOINT}"\xa0\\\n  -d\xa0"client_id=${CLIENT_ID}"\xa0\\\n  -d\xa0"grant_type=refresh_token"\xa0\\\n  -d\xa0"refresh_token=${REFRESH_TOKEN}"\xa0\\\n  -d\xa0"scope=openid%20email%20profile"\xa0|\xa0python\xa0-m\xa0json.tool;\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("h5",{id:"token-exchange"},"Token Exchange"),(0,i.kt)("p",null,"To get a token from client B using a token issued for client A, the parameters\nof the request are:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence"),(0,i.kt)("th",{parentName:"tr",align:null},"Values"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"urn:ietf:params:oauth:grant-type:token-exchange"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"audience")),(0,i.kt)("td",{parentName:"tr",align:null},"Optional"),(0,i.kt)("td",{parentName:"tr",align:null},"Define the logical name of the service that the token will be used for")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"subject_token")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The value of the access token")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"subject_token_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"urn:ietf:params:oauth:token-type:access_token")," (because\xa0this\xa0feature\xa0accepts\xa0access\xa0tokens\xa0only)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"scope")),(0,i.kt)("td",{parentName:"tr",align:null},"Optional"),(0,i.kt)("td",{parentName:"tr",align:null},"Define one or more scopes that are contained in the original token; otherwise all scopes will be selected")))),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl\xa0-X\xa0POST\xa0"${TOKEN_ENDPOINT}" \\\n  -u\xa0"${CLIENT_B_ID}":"${CLIENT_B_SECRET}"\xa0\\\n  -d\xa0"grant_type=urn:ietf:params:oauth:grant-type:token-exchange"\xa0\\\n  -d\xa0"audience=tokenExchange"\xa0\\\n  -d\xa0"subject_token=${ACCESS_TOKEN_A}"\xa0\\\n  -d\xa0"subject_token_type=urn:ietf:params:oauth:token-type:access_token"\xa0\\\n  -d\xa0"scope=openid%20profile%20offline_access"\xa0|\xa0python\xa0-m\xa0json.tool;\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJraWQiOiJvaWRjIiwiYWxnIjoiUl...",\n  "expires_in": 3599,\n  "id_token": "eyJraWQiOiJvaWRjIiwiYWxnIjoiUl...",\n  "refresh_token": "eyJhbGciOiJub25lIn0.eyJleHAiO...",\n  "scope": "openid\xa0profile\xa0offline_access",\n  "token_type": "Bearer"\n}\n')),(0,i.kt)("h5",{id:"device-code"},"Device Code"),(0,i.kt)("p",null,"The device code flow enables OAuth clients on (input-constrained) devices to\nobtain user authorization for accessing protected resources without using an\non-device user-agent, provided that they have an Internet connection."),(0,i.kt)("h6",{id:"1-device-authorization-request"},"1. Device Authorization Request"),(0,i.kt)("p",null,'The\xa0client\xa0initiates\xa0the\xa0authorization\xa0flow\xa0by\xa0requesting\xa0a\xa0set\xa0of\nverification\xa0codes\xa0from\xa0the\xa0authorization\xa0server\xa0by\xa0making\xa0an\xa0HTTP\xa0"POST"\nrequest\xa0to\xa0the\xa0device\xa0authorization\xa0endpoint. The\xa0client\xa0constructs\xa0the\xa0request\nwith\xa0the\xa0following\xa0parameters:'),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence"),(0,i.kt)("th",{parentName:"tr",align:null},"Values"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The identifier of the client")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"scope")),(0,i.kt)("td",{parentName:"tr",align:null},"Optional"),(0,i.kt)("td",{parentName:"tr",align:null},"Define one or more scopes that are contained in the original token; otherwise all scopes will be selected")))),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl\xa0-X\xa0POST\xa0"${DEVICE_CODE_ENDPOINT}"\xa0\\\n  -H\xa0"Content-Type:\xa0application/x-www-form-urlencoded"\xa0\\\n  -d\xa0"client_id=${CLIENT_ID}"\xa0\\\n  -d\xa0"scope=openid%20email%20profile"\xa0|\xa0python\xa0-m\xa0json.tool\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Device Code Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "device_code": "c4341bd6-5e82-4f9c-9f6f-5842409d48db",\n  "expires_in": 600,\n  "user_code": "IEJSJB",\n  "verification_uri": "https://rciam.example.org/oidc/device"\n}\n')),(0,i.kt)("h6",{id:"2-user-interaction"},"2. User Interaction"),(0,i.kt)("p",null,"After\xa0receiving\xa0a\xa0successful\xa0Authorization\xa0Response,\xa0the\xa0client\xa0displays\xa0or\notherwise\xa0communicates\xa0the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"user_code"),"\xa0and\xa0the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"verification_uri"),"\xa0to\xa0the\xa0end\nuser\xa0and\xa0instructs\xa0them\xa0to\xa0visit\xa0the\xa0URI\xa0in\xa0a\xa0user\xa0agent\xa0on\xa0a\xa0secondary\ndevice\xa0(for\xa0example,\xa0in\xa0a\xa0browser\xa0on\xa0their\xa0mobile\xa0phone),\xa0and\xa0enter\xa0the\nuser\xa0code."),(0,i.kt)("h6",{id:"3-device-access-token-request"},"3. Device Access Token Request"),(0,i.kt)("p",null,"After\xa0displaying\xa0instructions\xa0to\xa0the\xa0user,\xa0the\xa0client\xa0makes\xa0an\xa0Access\xa0Token\nRequest\xa0to\xa0the\xa0token\xa0endpoint.\xa0The\xa0request\xa0contains\xa0the\xa0following\xa0parameters:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence"),(0,i.kt)("th",{parentName:"tr",align:null},"Values"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"urn:ietf:params:oauth:grant-type:device_code"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_code")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The\xa0device\xa0verification\xa0code,\xa0",(0,i.kt)("inlineCode",{parentName:"td"},"device_code"),"\xa0from\xa0the\xa0Device\xa0Authorization\xa0Response")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The\xa0identifier\xa0of\xa0the\xa0client")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_secret")),(0,i.kt)("td",{parentName:"tr",align:null},"Required"),(0,i.kt)("td",{parentName:"tr",align:null},"The\xa0secret\xa0value\xa0of\xa0the\xa0client")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"scope")),(0,i.kt)("td",{parentName:"tr",align:null},"Optional"),(0,i.kt)("td",{parentName:"tr",align:null},"Define one or more scopes that are contained in the original token; otherwise all scopes will be selected")))),(0,i.kt)("p",null,"Example request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl\xa0-X\xa0POST\xa0"${TOKEN_ENDPOINT}" \\\n  -H\xa0"Content-Type:\xa0application/x-www-form-urlencoded"\xa0\\\n  -d\xa0"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code"\xa0\\\n  -d\xa0"device_code=${DEVICE_CODE}"\xa0\\\n  -d\xa0"client_id=${CLIENT_ID}"\xa0\\\n  -d\xa0"client_secret=${CLIENT_SECRET}"\xa0\\\n  -d\xa0"scope=openid%20profile"\xa0|\xa0python\xa0-m\xa0json.tool\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"Example response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJraWQiOiJyc2ExIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiJhZG1pbiIs...",\n  "expires_in": 3599,\n  "id_token": "eyJraWQiOiJyc2ExIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI5MDM0Mi...",\n  "scope": "openid\xa0profile",\n  "token_type": "Bearer"\n}\n')),(0,i.kt)("h6",{id:"device-code-with-pkce"},"Device Code with PKCE"),(0,i.kt)("p",null,"To combine Device Code flow with PKCE you need to make the following requests:"),(0,i.kt)("p",null,"1 - Device Authorization Request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST "${DEVICE_CODE_ENDPOINT}" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "client_id=${CLIENT_ID}" \\\n  -d "scope=openid%20email%20profile" \\\n  -d "code_challenge=${CODE_CHALLENGE}" \\\n  -d "code_challenge_method=S256" | python -m json.tool\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Device Code Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("p",null,"2 - Device Access Token Request"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST "${TOKEN_ENDPOINT}" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code" \\\n  -d "device_code=${DEVICE_CODE}" \\\n  -d "client_id=${CLIENT_ID}" \\\n  -d "code_verifier=${CODE_VERIFIER}" | python -m json.tool\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find the ",(0,i.kt)("em",{parentName:"p"},"Token Endpoint")," in the ",(0,i.kt)("a",{parentName:"p",href:"#endpoints"},"Endpoints")," table."))),(0,i.kt)("h3",{id:"claims-based-authorisation"},"Claims-based authorisation"),(0,i.kt)("p",null,"RCIAM provides information about the authenticated user that may be used\nby Service Providers in order to control user access to resources. This\ninformation is provided by the RCIAM OIDC Provider in the form of\n",(0,i.kt)("a",{parentName:"p",href:"#claims"},"OIDC claims"),". The table below lists the claims that are relevant for\nuser authorisation:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"OIDC Claim"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#vogroup-membership-and-role-information"},"VO/group membership/roles of the authenticated user")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#capabilities"},"Capabilities")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#identity-assurance"},"Identity Assurance")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_assurance"))))),(0,i.kt)("h3",{id:"example-oidc-client"},"Example OIDC Client"),(0,i.kt)("p",null,"In this guide we will demonstrate how to install and configure a\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rciam/simple-oidc-client-php"},"Simple OIDC Client"),"."),(0,i.kt)("h4",{id:"install-simple-oidc-client-php"},"Install simple-oidc-client-php"),(0,i.kt)("p",null,"This guide assumes the Apache HTTP server has been installed and the document\nroot is ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/www/html")),(0,i.kt)("p",null,"Move to the apache document root and download and extract\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rciam/simple-oidc-client-php/releases/download/v2.0.0/simple-oidc-client-php-v2.0.0.zip"},"simple-oidc-client-php-v2.0.0.zip"),"."),(0,i.kt)("h4",{id:"configure-client"},"Configure Client"),(0,i.kt)("p",null,"Login to the ",(0,i.kt)("a",{parentName:"p",href:"https://federation-demo.rciam.grnet.gr"},"RCIAM Federation Registry")),(0,i.kt)("p",null,"Then create a new service or edit your existing service. In ",(0,i.kt)("inlineCode",{parentName:"p"},"General")," tab fill\nall the required fields. For ",(0,i.kt)("inlineCode",{parentName:"p"},"Integration Environment")," select ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo"),". In\n",(0,i.kt)("inlineCode",{parentName:"p"},"Protocol Specific")," tab select as Protocol the ",(0,i.kt)("inlineCode",{parentName:"p"},"OIDC Service")," and then in the\n",(0,i.kt)("inlineCode",{parentName:"p"},"Redirect URI(s)")," insert your simple-oidc-client-php URL (e.g.\n",(0,i.kt)("inlineCode",{parentName:"p"},"http://localhost/simple-oidc-client-php/refreshtoken.php"),"). This URL must link\nto ",(0,i.kt)("inlineCode",{parentName:"p"},"refreshtoken.php")," which is located in simple-oidc-client-php directory.\nNext, in ",(0,i.kt)("inlineCode",{parentName:"p"},"Scope")," select the scopes that your service needs. Then, submit the\nform and and self approve it. Finally you should get a pair of ",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"Client Secret"),"."),(0,i.kt)("h4",{id:"configure-simple-oidc-client-php"},"Configure simple-oidc-client-php"),(0,i.kt)("p",null,"Now that you have everything you need, you can configure your login settings. Go\nto your terminal and open ",(0,i.kt)("inlineCode",{parentName:"p"},"config.php")," with your favorite text editor."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"vi simple-oidc-client-php/config.php\n")),(0,i.kt)("p",null,"Let's go quickly through the settings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"title")," required, the title on the navigation bar"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"img")," required, the source of the logo"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"scope_info")," optional, a message that informs the user for the application\nrequirements"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"issuer")," required, the base URL of our IdentityServer instance. This will\nallow oidc-client to query the metadata endpoint so it can validate the tokens"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"client_id")," required, the id of the client we want to use when hitting the\nauthorization endpoint"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"client_secret")," optional, a value the offers better security to the message\nflow"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pkceCodeChallengeMethod")," optional, a string that defines the code challenge\nmethod for PKCE. Choose between ",(0,i.kt)("inlineCode",{parentName:"li"},"plain")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"S256"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"redirect_url")," required, the redirect URL where the client and the browser\nagree to send and receive correspondingly the code"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"scopesDefine")," required, defines the scopes the client supports"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"refresh_token_note")," optional, info for the refresh token"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"access_token_note")," optional, info for the access token"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"manage_token_note")," optional, message the informs the user where can manage\nhis tokens"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"manageTokens")," optional, URL of the manage tokens service"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionName")," required, define the name of the cookie session"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionLifetime")," required, define the duration of the session. This must be\nequal to the validity time of the access token.")),(0,i.kt)("p",null,"You must change the followings options based on your Service configuration you\nsetup earlier:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"issuer")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"client_id")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"client_secret")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"redirect_url")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"scopesDefine")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionName")," (based on the installation path of the portal)")),(0,i.kt)("p",null,"An example configuration follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n// index.php interface configuration\n$title = "Generate Tokens";\n$img = "https://clickhelp.co/images/feeds/blog/2016.05/keys.jpg";\n$scope_info = "This service requires the following permissions for your account:";\n\n// Client configuration\n$issuer = "https://rciam-demo.example.org/oidc/";\n$client_id = "CHANGE_ME";\n$client_secret = "CHANGE_ME";  // comment if you are using PKCE\n// $pkceCodeChallengeMethod = "S256";   // uncomment to use PKCE\n$redirect_url = "http://localhost/simple-oidc-client-php/refreshtoken.php";\n// add scopes as keys and a friendly message of the scope as value\n$scopesDefine = array(\n    \'openid\' => \'log in using your identity\',\n    \'email\' => \'read your email address\',\n    \'profile\' => \'read your basic profile info\',\n);\n// refreshtoken.php interface configuration\n$refresh_token_note = "NOTE: New refresh tokens expire in 12 months.";\n$access_token_note = "NOTE: New access tokens expire in 1 hour.";\n$manage_token_note = "You can manage your refresh tokens in the following link: ";\n$manageTokens = $issuer . "manage/user/services";\n$sessionName = "simple-oidc-client-php";\n$sessionLifetime = 60*60;  // must be equal to access token validation time in seconds\n')),(0,i.kt)("h2",{id:"user-attributes"},"User attributes"),(0,i.kt)("p",null,"This section defines the attributes that can be made available to services\nconnected to RCIAM."),(0,i.kt)("h3",{id:"1-rciam-id"},"1. RCIAM ID"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"RCIAM ID"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"An identifier for the user, unique among all RCIAM accounts and never reused")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"1.3.6.1.4.1.5923.1.1.1.13")," (eduPersonUniqueId)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"openid"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"sub"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"ID token"),(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM assigns this attribute on user registration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},(0,i.kt)("a",{parentName:"em",href:"mailto:ef72285491ffe53c39b75bdcef46689f5d26ddfa00312365cc4fb5ce97e9ca87@example.org"},"ef72285491ffe53c39b75bdcef46689f5d26ddfa00312365cc4fb5ce97e9ca87@example.org")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Use ",(0,i.kt)("strong",{parentName:"td"},"RCIAM ID")," within your application as the unique-identifier key for the user")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"2-display-name"},"2. Display Name"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Display Name"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's full name, in a displayable form")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:2.16.840.1.113730.3.1.241")," (displayName)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"profile"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"name"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Userinfo endpoint")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Provided by user's Identity Provider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"John Doe"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"3-given-name"},"3. Given Name"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Given Name"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's first name")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:2.5.4.42")," (givenName)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"profile"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"given_name"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Userinfo endpoint")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Provided by user's Identity Provider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"John"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"4-family-name"},"4. Family Name"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Family Name"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's last name")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:2.5.4.4")," (sn)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"profile"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"family_name"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Userinfo endpoint")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Provided by user's Identity Provider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"Doe"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"5-username"},"5. Username"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Username"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The username by which the user wishes to be referred to")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:0.9.2342.19200300.100.1.1")," (uid)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"profile"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"preferred_username"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"ID token"),(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM assigns this attribute on user registration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"jdoe"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The Service Provider ",(0,i.kt)("strong",{parentName:"td"},"MUST NOT")," rely upon this value being unique")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"6-email-address"},"6. Email Address"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Email Address"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's email address")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:0.9.2342.19200300.100.1.3")," (mail)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Provided by user's Identity Provider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},(0,i.kt)("a",{parentName:"em",href:"mailto:john.doe@example.org"},"john.doe@example.org")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"This ",(0,i.kt)("strong",{parentName:"td"},"MAY NOT")," be unique and is ",(0,i.kt)("strong",{parentName:"td"},"NOT")," suitable for use as a primary key")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"7-verified-email-flag"},"7. Verified email flag"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Verified email flag"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"True if the user's email address has been verified; otherwise false")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},"See ",(0,i.kt)("a",{parentName:"td",href:"#8-verified-email-list"},"Verified email list"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email_verified"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM assigns this attribute on user registration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Single-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"true"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"This claim is available only in OpenID Connect")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"8-verified-email-list"},"8. Verified email list"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Verified email list"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"A list of user's email addresses that have been verified")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.25178.4.1.14")," (voPersonVerifiedEmail)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"voperson_verified_email"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM or the user's Identity Provider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Not always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("a",{parentName:"td",href:"mailto:_john.doe@example.org_"},"_john.doe@example.org_")),(0,i.kt)("li",null,(0,i.kt)("a",{parentName:"td",href:"mailto:_jdoe@example.com_"},"_jdoe@example.com_"))))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Experimental")))),(0,i.kt)("h3",{id:"9-affiliation"},"9. Affiliation"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Affiliation"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's affiliation within a particular security domain (scope)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.5923.1.1.1.9")," (eduPersonScopedAffiliation)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_scoped_affiliation"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_scoped_affiliation"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM assigns this attribute on user registration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},(0,i.kt)("a",{parentName:"em",href:"mailto:member@example.org"},"member@example.org")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Service Providers are encouraged to validate the scope of this attribute")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"10-groups"},"10. Groups"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Groups"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"The user's group/VO membership/role information expressed as entitlements")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.5923.1.1.1.7")," (eduPersonEntitlement)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Group memberships are managed by group administrators")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Not always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"urn:mace:example.org:group:vo.example.org:role=vm_operator#rciam.example.org"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"11-capabilities"},"11. Capabilities"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Capabilities"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"This attribute describes the resource or child-resource a user is allowed to access, optionally specifying certain actions the user is entitled to perform, as described in ",(0,i.kt)("a",{parentName:"td",href:"https://aarc-community.org/guidelines/aarc-g027/"},"AARC-G027"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.5923.1.1.1.7")," (eduPersonEntitlement)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_entitlement"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Capabilities are managed by RCIAM")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Not always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"urn:mace:example.org:res:example-res#rciam.example.org"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable")))),(0,i.kt)("h3",{id:"12-assurance"},"12. Assurance"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Assurance"),(0,i.kt)("th",{parentName:"tr",align:null}))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Assurance of the identity of the user, following ",(0,i.kt)("a",{parentName:"td",href:"https://refeds.org/assurance"},"REFEDS Assurance Framework (RAF)")," and the ",(0,i.kt)("a",{parentName:"td",href:"#level-of-assurance"},"RCIAM AAI Assurance Profiles"),". The following RAF values are qualified and automatically set for all Community identities:",(0,i.kt)("ul",null,(0,i.kt)("li",null,"$PREFIX$"),(0,i.kt)("li",null,"$PREFIX$/ID/unique"),(0,i.kt)("li",null,"$PREFIX$/ID/eppn-unique-no-reassign"),(0,i.kt)("li",null,"$PREFIX$/IAP/low"),(0,i.kt)("li",null,"$PREFIX$/ATP/ePA-1m"),(0,i.kt)("li",null,"$PREFIX$/ATP/ePA-1d")),"Following RAF values are set if the currently used authentication provider asserts (or otherwise qualifies to) them:",(0,i.kt)("ul",null,(0,i.kt)("li",null,"$PREFIX$/IAP/medium"),(0,i.kt)("li",null,"$PREFIX$/IAP/high")),"The following compound profiles are asserted if the user qualifies to them",(0,i.kt)("ul",null,(0,i.kt)("li",null,"$PREFIX$/profile/cappuccino"),(0,i.kt)("li",null,"$PREFIX$/profile/espresso"))),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.5923.1.1.1.11")," (eduPersonAssurance)"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_assurance")),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"eduperson_assurance")),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"Userinfo endpoint"),(0,i.kt)("li",null,"Introspection endpoint"))),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"RCIAM assigns this attribute on user registration"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Not always"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("em",{parentName:"td"},"[",(0,i.kt)("inlineCode",{parentName:"em"},"https://rciam.example.org/LoA#Low"),", ",(0,i.kt)("inlineCode",{parentName:"em"},"https://refeds.org/assurance/IAP/low"),"]")),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Stable"),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("h3",{id:"13-ssh-public-key"},"13. SSH Public Key"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"attribute name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"SSH Public Key"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"description")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Provides information about the user's SSH public key(s)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"SAML Attribute(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"urn:oid:1.3.6.1.4.1.24552.500.1.1.1.13")," (sshPublicKey)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC scope")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ssh_public_key"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim(s)")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ssh_public_key"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"OIDC claim location")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Userinfo endpoint")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"origin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Added SSH public key(s) in user's RCIAM Profile")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"changes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"multiplicity")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Multi-valued")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"availability")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Not always")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"example")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ssh-rsa AAAAB3NzaC...qxxEEipdnZ nikosev@grnet-hq.admin.grnet.gr"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"notes")),(0,i.kt)("td",{parentName:"tr",align:"left"},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},(0,i.kt)("strong",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Experimental")))),(0,i.kt)("h2",{id:"user-authorisation"},"User authorisation"),(0,i.kt)("p",null,"The following information about the authenticated user can be provided by\nRCIAM in order to control user access to resources:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"VO/group membership and role information about the authenticated user"),(0,i.kt)("li",{parentName:"ol"},"Capabilities"),(0,i.kt)("li",{parentName:"ol"},"Identity Assurance")),(0,i.kt)("h3",{id:"vogroup-membership-and-role-information"},"VO/group membership and role information"),(0,i.kt)("h4",{id:"background"},"Background"),(0,i.kt)("p",null,"VO/group membership and role information is encoded in entitlements\n(",(0,i.kt)("inlineCode",{parentName:"p"},"eduPersonEntitlement")," attribute values in SAML or ",(0,i.kt)("inlineCode",{parentName:"p"},"eduperson_entitlement"),"\nclaim in OIDC). These entitlements are typically used to indicate access rights\nto protected resources. Entitlements are multi-valued, with each value formatted\nas a URN."),(0,i.kt)("h4",{id:"syntax"},"Syntax"),(0,i.kt)("p",null,"An entitlement value expressing group membership and role information has the\nfollowing syntax (components enclosed in square brackets are OPTIONAL):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"urn:mace:example.org:group:<GROUP>[:<SUBGROUP>*][:role=<ROLE>]#<GROUP-AUTHORITY>\n")),(0,i.kt)("p",null,"where:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<GROUP>")," is the name of a VO, research collaboration or a top level arbitrary\ngroup. ",(0,i.kt)("inlineCode",{parentName:"li"},"<GROUP>")," names are unique within the ",(0,i.kt)("inlineCode",{parentName:"li"},"urn:mace:example.org:group"),"\nnamespace;"),(0,i.kt)("li",{parentName:"ul"},"zero or more ",(0,i.kt)("inlineCode",{parentName:"li"},"<SUBGROUP>")," components represent the hierarchy of subgroups in\nthe ",(0,i.kt)("inlineCode",{parentName:"li"},"<GROUP>"),"; specifying sub-groups is optional"),(0,i.kt)("li",{parentName:"ul"},"the optional ",(0,i.kt)("inlineCode",{parentName:"li"},"<ROLE>")," component is scoped to the rightmost (sub)group; if no\ngroup information is specified, the role applies to the VO"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<GROUP-AUTHORITY>")," is a non-empty string that indicates the authoritative\nsource for the entitlement value. For example, it can be the FQDN of the group\nmanagement system that is responsible for the identified group membership\ninformation")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"urn:mace:example.org:group:vo.example.org:role=vm_operator#rciam.example.org\n")),(0,i.kt)("h3",{id:"capabilities"},"Capabilities"),(0,i.kt)("h4",{id:"background-1"},"Background"),(0,i.kt)("p",null,"The user's capability information is encoded in entitlements\n(",(0,i.kt)("inlineCode",{parentName:"p"},"eduPersonEntitlement")," attribute values in SAML or ",(0,i.kt)("inlineCode",{parentName:"p"},"eduperson_entitlement"),"\nclaim in OIDC). These entitlements are typically used to indicate access rights\nto protected resources. Entitlements are multi-valued, with each value formatted\nas a URN following the syntax defined in\n",(0,i.kt)("a",{parentName:"p",href:"https://aarc-community.org/guidelines/aarc-g027/"},"AARC-G027"),"."),(0,i.kt)("h4",{id:"syntax-1"},"Syntax"),(0,i.kt)("p",null,"An entitlement value expressing a capability has the following syntax\n(components enclosed in square brackets are OPTIONAL):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"<NAMESPACE>:res:<RESOURCE>[:<CHILD-RESOURCE>]...[:act:<ACTION>[,<ACTION>]...]#<AUTHORITY>\n")),(0,i.kt)("p",null,"where:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"<NAMESPACE>")," is controlled by the e-infrastructure, research infrastructure\nor research collaboration that manages the capability. The ",(0,i.kt)("inlineCode",{parentName:"p"},"<NAMESPACE>")," of\ncapabilities managed by RCIAM is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"urn:mace:example.org"),", while,\ngenerally, it is in the form of\n",(0,i.kt)("inlineCode",{parentName:"p"},"urn:<NID>:<DELEGATED-NAMESPACE>[:<SUBNAMESPACE>]...")," where:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"<NID>")," is the namespace identifier associated with a URN namespace\nregistered with IANA2, ensuring global uniqueness. Implementers SHOULD use\none of the existing registered URN namespaces, such as\n",(0,i.kt)("inlineCode",{parentName:"p"},"urn:mace"),"[",(0,i.kt)("a",{parentName:"p",href:"https://incommon.org/community/mace-registries/mace-urn-registry/"},"MACE"),"].")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"<DELEGATED-NAMESPACE>")," is a URN sub-namespace delegated from one of the\nIANA registered NIDs to an organisation representing the e-infrastructure,\nresearch infrastructure or research collaboration. It is RECOMMENDED that a\npublicly accessible URN value registry for each delegated namespace be\nprovided.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The literal string ",(0,i.kt)("inlineCode",{parentName:"p"},'"res"')," indicates that this is a resource-specific\nentitlement as opposed to, for example, an entitlement used for expressing\ngroup membership\n",(0,i.kt)("a",{parentName:"p",href:"https://aarc-community.org/guidelines/aarc-g002/"},"AARC-G002"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"<RESOURCE>")," is the name of the resource. Whether the name should be unique is\nan implementation decision.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"An optional list of colon-separated ",(0,i.kt)("inlineCode",{parentName:"p"},"<CHILD-RESOURCE>")," components represents a\nspecific branch of the hierarchy of resources under the identified\n",(0,i.kt)("inlineCode",{parentName:"p"},"<RESOURCE>"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"An optional list of comma-separated ",(0,i.kt)("inlineCode",{parentName:"p"},"<ACTION>"),"s MAY be included, which, if\npresent, MUST be prefixed with the literal string \u201cact\u201d. This component MAY be\nused for further specifying the actions a user is entitled to do at a given\nresource. Note that the list of ",(0,i.kt)("inlineCode",{parentName:"p"},"<ACTION>"),"s is scoped to the rightmost\nchild-resource; if no child-resource information is specified, actions apply\nto the top level resource. The interpretation of a capability without actions\nspecified is an implementation detail.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"<AUTHORITY>")," is a mandatory and non-empty string that indicates the\nauthoritative source of the capability. This SHOULD be used to further specify\nthe exact issuing instance. For example, it MAY be the FQDN of the service\nthat issued that specific capability. The ",(0,i.kt)("inlineCode",{parentName:"p"},"<AUTHORITY>")," is specified in the\nf-component ",(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc8141"},"RFC8141"),' of the URN; thus,\nit is introduced by the number sign ("#") character and terminated by the end\nof the URN. All characters must be encoded according to\n',(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc8141"},"RFC8141"),". Hence, the ",(0,i.kt)("inlineCode",{parentName:"p"},"<AUTHORITY>")," MUST\nNOT be considered when determining equivalence (Section 3 in\n",(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc8141"},"RFC8141"),") of URN-formatted capabilities.\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"<AUTHORITY>")," of capabilities managed by RCIAM is typically set to\n",(0,i.kt)("inlineCode",{parentName:"p"},"rciam.example.org"),"."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"urn:mace:example.org:res:example-res#rciam.example.org\n")),(0,i.kt)("h3",{id:"identity-assurance"},"Identity Assurance"),(0,i.kt)("p",null,"Based on the authentication method selected by the user, the RCIAM proxy\nassigns a Identity Assurance, which is conveyed to the SP through both the\n",(0,i.kt)("inlineCode",{parentName:"p"},"eduPersonAssurance")," attribute and the Authentication Context Class\n(",(0,i.kt)("inlineCode",{parentName:"p"},"AuthnContextClassRef"),") of the SAML authentication response. RCIAM uses\nAssurance Profiles which distinguish between three Identity Assurance levels,\nsimilarly to the\n",(0,i.kt)("a",{parentName:"p",href:"http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=OJ:JOL_2015_235_R_0002"},"eID Assurance Framework (eIDAF)"),".\nEach level is represented by a URI as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Low"),": Authentication through a social identity provider or other low\nidentity assurance provider: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://rciam.example.org/LoA#Low")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Substantial"),": Password/X.509 authentication at the user\\'s home IdP:\n",(0,i.kt)("inlineCode",{parentName:"li"},"https://rciam.example.org/LoA#Substantial")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"High"),": Substantial + multi-factor authn (not yet supported, TBD):\n",(0,i.kt)("inlineCode",{parentName:"li"},"https://rciam.example.org/LoA#High"))),(0,i.kt)("p",null,"Moreover, RCIAM follows the\n",(0,i.kt)("a",{parentName:"p",href:"https://wiki.refeds.org/display/ASS/REFEDS+Assurance+Framework+ver+1.0"},"REFEDS Assurance framework (RAF)"),".\nThe RCIAM conveys any RAF values provided by the IdP directly to the SP,\nthrough the aforementioned methods. Furthermore, RCIAM will append into the\nUser's profile any additional LoA, if the user is eligible for it. For example,\na user having a Verified Email is eligible for the RAF value\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://refeds.org/assurance/IAP/low")),(0,i.kt)("p",null,"Some RCIAM SPs have been configured to provide limited access (or not to accept at\nall) credentials with the Low LoA."))}k.isMDXComponent=!0}}]);