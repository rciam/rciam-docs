<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Service Providers | RCIAM Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://rciam.github.io/rciam-docs/docs/developer/guide-for-sps"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Service Providers | RCIAM Docs"><meta data-react-helmet="true" name="description" content="This page contains information about connecting services to"><meta data-react-helmet="true" property="og:description" content="This page contains information about connecting services to"><link data-react-helmet="true" rel="shortcut icon" href="/rciam-docs/img/rciam-favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://rciam.github.io/rciam-docs/docs/developer/guide-for-sps"><link data-react-helmet="true" rel="alternate" href="https://rciam.github.io/rciam-docs/docs/developer/guide-for-sps" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rciam.github.io/rciam-docs/docs/developer/guide-for-sps" hreflang="x-default"><link rel="stylesheet" href="/rciam-docs/assets/css/styles.0e6d925c.css">
<link rel="preload" href="/rciam-docs/assets/js/runtime~main.d3e33a5e.js" as="script">
<link rel="preload" href="/rciam-docs/assets/js/main.a47723e3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rciam-docs/"><img src="/rciam-docs/img/rciam-logo.svg" alt="RCIAM Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rciam-docs/img/rciam-logo.svg" alt="RCIAM Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/user/signup">End-User</a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/manager/virtual-organisations">Manager</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/developer/guide-for-sps">Developer</a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/glossary">Glossary</a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/features">Features</a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/use-cases">Use Cases</a><a class="navbar__item navbar__link navbar__link--active" href="/rciam-docs/docs/roadmap">Roadmap</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/rciam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rciam-docs/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">End-User</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Manager</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developer</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rciam-docs/docs/developer/guide-for-sps">Service Providers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rciam-docs/docs/developer/guide-for-idps">Identity Providers</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rciam-docs/docs/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rciam-docs/docs/features">Features</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rciam-docs/docs/use-cases">Use Cases</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rciam-docs/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Service Providers</h1></header><p>This page contains information about connecting services to
RCIAM in order to allow user
login through RCIAM and to receive users&#x27; attributes. RCIAM is connected
to a wide range of academic and social Identity Providers that users can choose
from in order to access your service.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="service-provider-integration-workflow"></a>Service Provider integration workflow<a class="hash-link" href="#service-provider-integration-workflow" title="Direct link to heading">#</a></h2><p>To integrate your Service Provider with the RCIAM service, you need to
create a registration request using the
<a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">RCIAM Federation Registry Portal</a>. You
can also use the Federation Registry portal to request the reconfiguration or
deregistration of an existing deployed service. Service registration requests
typically require approval by an administrator. Please refer to the
<a href="https://federation.rciam.grnet.gr/docs" target="_blank" rel="noopener noreferrer">Federation Registry Documentation</a> for
more information.</p><p>The integration follows a two-step process:</p><ol><li>Register your Service Provider and test integration with the <strong>demo</strong>
instance of RCIAM by selecting the &quot;Demo&quot; integration environment
during registration through the RCIAM Federation Registry Portal. The demo
instance allows for testing authentication and authorisation through the
academic and social Identity Providers connected to RCIAM without
affecting the production RCIAM service. Note that while the demo instance
has identical functionality to the production instance, no information is
shared between the two systems.</li><li>Register your Service Provider with the <strong>production</strong> instance of RCIAM
by selecting the &quot;Production&quot; integration environment during
registration through the RCIAM Federation Registry Portal. The production
instance allows access to your service through the academic and social
Identity Providers connected to RCIAM. This requires that your service
integration has been thoroughly tested during Step 1.</li></ol><p>The most important URLs for each environment are listed in the table below but
more information can be found in the protocol-specific sections that follow.</p><table><thead><tr><th>Protocol</th><th>Demo environment</th><th>Production environment</th></tr></thead><tbody><tr><td>SAML</td><td><a href="https://rciam-demo.example.org/proxy/saml2/idp/metadata.php" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/proxy/saml2/idp/metadata.php</a></td><td><a href="https://rciam.example.org/proxy/saml2/idp/metadata.php" target="_blank" rel="noopener noreferrer">https://rciam.example.org/proxy/saml2/idp/metadata.php</a></td></tr><tr><td>OpenID Connect</td><td><a href="https://rciam-demo.example.org/oidc/.well-known/openid-configuration" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/.well-known/openid-configuration</a></td><td><a href="https://rciam.example.org/oidc/.well-known/openid-configuration" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/.well-known/openid-configuration</a></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="general-information"></a>General Information<a class="hash-link" href="#general-information" title="Direct link to heading">#</a></h2><p>RCIAM supports two authentication and authorisation protocols that you
can choose from:</p><ol><li><a href="http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html" target="_blank" rel="noopener noreferrer">Security Assertion Markup Language (SAML) 2.0</a></li><li><a href="https://openid.net/specs/openid-connect-core-1_0.html" target="_blank" rel="noopener noreferrer">OpenID Connect</a> - an
extension to <a href="https://tools.ietf.org/html/rfc6749" target="_blank" rel="noopener noreferrer">OAuth 2.0</a></li></ol><p>Regardless of which of the two protocols you are going to use, you need to
provide the following information to connect your service to RCIAM:</p><ol><li>Name of the service (in English and optionally in other languages supported
by the service)</li><li>Short description of the service</li><li>Website (URL) for localised information about the service; the content found
at the URL SHOULD provide more complete information than what provided by the
description</li><li>Contact information of the following types:<ul><li>Helpdesk/Support contact information (for redirecting user)</li><li>Administrative</li><li>Technical</li><li>Security/incident response</li></ul></li><li>Privacy statement URL: The privacy policy is used to document the data
collected and processed by the service. You can use the
<a href="https://docs.google.com/document/d/1ZU7VjH3g7qcfWcz0Z8TTv-vQiVoRA_wOsuMyJaz28Og/edit" target="_blank" rel="noopener noreferrer">Privacy Policy template</a></li><li>Logo URL (optional for showing in catalogues); if provided, logos SHOULD:<ul><li>use a transparent background where appropriate to facilitate the usage of
logos within a user interface</li><li>use PNG, or GIF (less preferred), images</li><li>use HTTPS URLs in order to avoid mixed-content warnings within browsers</li><li>have a size larger than 40000 and smaller than 50000 characters when
encoded in base64</li></ul></li><li>Country of the service</li><li>Compliance with the policies</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="saml-service-provider"></a>SAML Service Provider<a class="hash-link" href="#saml-service-provider" title="Direct link to heading">#</a></h2><p>To enable federated access to a web-based application, you can connect to the
RCIAM IdP as a SAML Service Provider (SP). Users of the application will
be redirected to RCIAM in order to log in, and RCIAM can authenticate them
using any of the supported backend authentication mechanisms, such as
institutional IdPs registered with eduGAIN or Social Providers. Once the user is
authenticated, RCIAM will return a SAML assertion to the application
containing information about the authenticated user.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="metadata-registration"></a>Metadata registration<a class="hash-link" href="#metadata-registration" title="Direct link to heading">#</a></h3><p>SAML authentication relies on the use of metadata. Both parties (you as a SP and
the RCIAM IdP) need to exchange metadata in order to know and trust each
other. The metadata include information such as the location of the service
endpoints that need to be invoked, as well as the certificates that will be used
to sign SAML messages. The format of the exchanged metadata should be based on
the XML-based
<a href="https://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf" target="_blank" rel="noopener noreferrer">SAML 2.0 specification</a>.
Usually, you will not need to manually create such an XML document, as this is
automatically generated by all major SAML 2.0 SP software solutions (e.g.,
Shibboleth, SimpleSAMLphp, and <code>mod_auth_mellon</code>). It is important that you
serve your metadata over HTTPS using a browser-friendly SSL certificate, i.e.
issued by a trusted certificate authority.</p><p>You can get the metadata of the RCIAM IdP Proxy on a dedicated URL that
depends on the integration environment being used:</p><table><thead><tr><th>Demo environment</th><th>Production environment</th></tr></thead><tbody><tr><td><a href="https://rciam-demo.example.org/proxy/saml2/idp/metadata.php" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/proxy/saml2/idp/metadata.php</a></td><td><a href="https://rciam.example.org/proxy/saml2/idp/metadata.php" target="_blank" rel="noopener noreferrer">https://rciam.example.org/proxy/saml2/idp/metadata.php</a></td></tr></tbody></table><p>To register your SAML SP, you must submit a service registration request at
<a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">Federation Registry</a>. Your request should
include the general information about your service (see
<a href="#general-information">General Information</a>) and the SP&#x27;s metadata and entity
id.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="metadata"></a>Metadata<a class="hash-link" href="#metadata" title="Direct link to heading">#</a></h3><p>Metadata provided by your SP should contain a descriptive name of the service
that your SP represents in at least English. It is recommended to also provide
the name in other languages which are commonly used in the geographic scope of
the deployment. The name should be placed in the <code>&lt;md:ServiceName&gt;</code> in the
<code>&lt;md:AttributeConsumingService&gt;</code> container.</p><p>It is recommended that the <code>&lt;md:IDPSSODescriptor&gt;</code> element included in your SP
metadata contains both an <code>AuthnRequestsSigned</code> and an <code>WantAssertionsSigned</code>
attribute set to <code>true</code>.</p><p>Your SP metadata should also contain contact information for support and for a
technical contact. The <code>&lt;md:EntityDescriptor&gt;</code> element should contain both a
<code>&lt;md:ContactPerson&gt;</code> element with a <code>contactType</code> of <code>&quot;support&quot;</code> and a
<code>&lt;md:ContactPerson&gt;</code> element with a <code>contactType</code> of <code>&quot;technical&quot;</code>. The
<code>&lt;md:ContactPerson&gt;</code> elements should contain at least one <code>&lt;md:EmailAddress&gt;</code>.
The support address may be used for generic support questions about the service,
while the technical contact may be contacted regarding technical
interoperability problems. The technical contact must be responsible for the
technical operation of the service represented by your SP.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="attributes"></a>Attributes<a class="hash-link" href="#attributes" title="Direct link to heading">#</a></h3><p>The RCIAM IdP is guaranteed to release a minimal subset of the
<a href="https://refeds.org/category/research-and-scholarship" target="_blank" rel="noopener noreferrer">REFEDS R&amp;S</a> attribute
bundle to connected Service Providers without administrative involvement,
subject to user consent. The following attributes constitute a minimal subset of
the R&amp;S attribute bundle:</p><ul><li>Persistent, non-reassignable, non-targeted, opaque, globally unique RCIAM user
ID (<code>eduPersonUniqueId</code>); this is always scoped <code>@example.org</code></li><li>Email address (<code>mail</code>)</li><li>Display name (<code>displayName</code>) OR (<code>givenName</code> AND <code>sn</code>)</li></ul><p>A more extensive list of all the attributes that may be made available to
Service Providers is included in the <a href="#user-attributes">User Attribute</a> section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="attribute-based-authorisation"></a>Attribute-based authorisation<a class="hash-link" href="#attribute-based-authorisation" title="Direct link to heading">#</a></h3><p>RCIAM provides information about the authenticated user that may be used
by Service Providers in order to control user access to resources. This
information is provided by the RCIAM IdP in the
<a href="#attributes">SAML attribute assertion</a>. The table below lists the SAML
attributes that are relevant for user authorisation:</p><table><thead><tr><th>Description</th><th>SAML Attribute</th></tr></thead><tbody><tr><td><a href="#vogroup-membership-and-role-information">VO/group membership/roles of the authenticated user</a></td><td><code>eduPersonEntitlement</code></td></tr><tr><td><a href="#capabilities">Capabilities</a></td><td><code>eduPersonEntitlement</code></td></tr><tr><td><a href="#identity-assurance">Identity Assurance</a></td><td><code>eduPersonAssurance</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="references"></a>References<a class="hash-link" href="#references" title="Direct link to heading">#</a></h3><ul><li><a href="https://shibboleth.atlassian.net/wiki/spaces/SP3/overview" target="_blank" rel="noopener noreferrer">Shibboleth Service Provider Documentation</a></li><li><a href="https://simplesamlphp.org/docs/stable/simplesamlphp-sp" target="_blank" rel="noopener noreferrer">SimpleSAMLphp Service Provider QuickStart</a></li><li><a href="https://github.com/latchset/mod_auth_mellon" target="_blank" rel="noopener noreferrer">Simple SAML 2.0 service provider with mod_auth_mellon Apache module</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="openid-connect-service-provider"></a>OpenID Connect Service Provider<a class="hash-link" href="#openid-connect-service-provider" title="Direct link to heading">#</a></h2><p>Service Providers can be integrated with RCIAM using OpenID Connect
(OIDC) as an alternative to the SAML2 protocol. To allow this, the RCIAM
IdP provides an OpenID Connect (OAuth2) API based on
<a href="https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server" target="_blank" rel="noopener noreferrer">MITREid Connect</a>,
which has been
<a href="http://openid.net/certification/" target="_blank" rel="noopener noreferrer">certified by the OpenID Foundation</a>.
Interconnection with the RCIAM OIDC Provider allows users to sign in
using any of the supported backend authentication mechanisms, such as
institutional IdPs registered with eduGAIN or Social Providers. Once the user
has signed in, RCIAM can return OIDC Claims containing information about
the authenticated user.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="client-registration"></a>Client registration<a class="hash-link" href="#client-registration" title="Direct link to heading">#</a></h3><p>Before your service can use the RCIAM OIDC Provider for user login, you
must submit a service registration request using
<a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">Federation Registry</a> in order to
obtain OAuth 2.0 credentials. The client configuration should include the
general information about your service, as described in
<a href="#general-information">General Information</a> section.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="obtaining-oauth-20-credentials"></a>Obtaining OAuth 2.0 credentials<a class="hash-link" href="#obtaining-oauth-20-credentials" title="Direct link to heading">#</a></h4><p>You need OAuth 2.0 credentials, which typically include a client ID and client
secret, to authenticate users through the RCIAM OIDC Provider.</p><p>You can specify the client ID and secret when creating/editing your client or
let them being automatically generated during registration (<em>recommended</em>).</p><p>To find the ID and secret of your client, do the following:</p><ol><li>Select your client from the
<a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">Manage Services Page</a>.</li><li>Look for the <strong>Client ID</strong> in the <strong>Protocol</strong> tab.</li><li>Select the <strong>Display/edit client secret:</strong> option from the <strong>Protocol</strong> tab.</li></ol><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can copy these values using the green copy button next to the desired field.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="setting-one-or-more-redirection-uris"></a>Setting one or more Redirection URIs<a class="hash-link" href="#setting-one-or-more-redirection-uris" title="Direct link to heading">#</a></h4><p>The Redirection URI(s) that you set when creating/editing your client determine
where the RCIAM OIDC Provider sends responses to your authentication
requests. Note that the Redirection URI MUST use the <code>https</code> scheme; the use of
<code>http</code> Redirection URIs is only allowed in the demo environment.</p><p>To find the Redirection URI(s) for your client, do the following:</p><ol><li>Open the <a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">Manage Services</a></li><li>Find the redirect URIs for your client listed under the <strong>Protocol</strong> column
of the overview table or <strong>Edit</strong> the particular client and look for the
<strong>Redirect URI(s)</strong> in the <strong>Protocol</strong> tab.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="setting-additional-information-about-the-client"></a>Setting additional information about the client<a class="hash-link" href="#setting-additional-information-about-the-client" title="Direct link to heading">#</a></h4><p>It is strongly suggested that you add a short <strong>description</strong> and a <strong>logo</strong> for
the client. Lastly, you need to set the email addresses of one or more contacts.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="claims"></a>Claims<a class="hash-link" href="#claims" title="Direct link to heading">#</a></h3><p>The RCIAM UserInfo Endpoint is an OAuth 2.0 Protected Resource that
returns specific information about the authenticated End-User as Claim Values.
To obtain the requested Claims about the End-User, the Client makes a request to
the UserInfo Endpoint using an Access Token obtained through OpenID Connect
Authentication. The scopes associated with the Access Token used to access the
RCIAM UserInfo Endpoint will determine what Claims will be released.
These Claims are represented by a JSON object that contains a collection of name
and value pairs for the Claims.</p><p>The following scope values can be used to request Claims from the RCIAM
UserInfo Endpoint:</p><table><thead><tr><th>Scope</th><th>Claims</th></tr></thead><tbody><tr><td><code>openid</code></td><td><code>sub</code></td></tr><tr><td><code>profile</code></td><td><ul><li><code>name</code></li><li><code>given_name</code></li><li><code>family_name</code></li><li><code>preferred_username</code></li></ul></td></tr><tr><td><code>email</code></td><td><ul><li><code>email</code></li><li><code>email_verified</code></li><li><code>voperson_verified_email</code></li></ul></td></tr><tr><td><code>eduperson_scoped_affiliation</code></td><td><code>eduperson_scoped_affiliation</code></td></tr><tr><td><code>eduperson_entitlement</code></td><td><code>eduperson_entitlement</code></td></tr></tbody></table><p>A more extensive list of all the attributes that may be made available to
Service Providers is included in the <a href="#user-attributes">User Attribute</a> section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="grant-types"></a>Grant Types<a class="hash-link" href="#grant-types" title="Direct link to heading">#</a></h3><p>RCIAM supports the following OpenID Connect/OAuth2 grant types:</p><ul><li>Authorization Code: used by Web Apps executing on a server.</li><li>Token Exchange: used by clients to request and obtain security tokens in
support of delegated access to resources.</li><li>Device Code: used by devices that lack a browser to perform a user-agent based
OAuth flow.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="endpoints"></a>Endpoints<a class="hash-link" href="#endpoints" title="Direct link to heading">#</a></h3><p>The most important OIDC/OAuth2 endpoints are listed below:</p><table><thead><tr><th>Endpoint</th><th>Demo environment</th><th>Production environment</th></tr></thead><tbody><tr><td>Provider configuration</td><td><a href="https://rciam-demo.example.org/oidc/.well-known/openid-configuration" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/.well-known/openid-configuration</a></td><td><a href="https://rciam.example.org/oidc/.well-known/openid-configuration" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/.well-known/openid-configuration</a></td></tr><tr><td>Client registration</td><td><a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">https://federation-demo.rciam.grnet.gr</a></td><td><a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">https://federation-demo.rciam.grnet.gr</a></td></tr><tr><td>Authorisation</td><td><a href="https://rciam-demo.example.org/oidc/authorize" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/authorize</a></td><td><a href="https://rciam.example.org/oidc/authorize" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/authorize</a></td></tr><tr><td>Token</td><td><a href="https://rciam-demo.example.org/oidc/token" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/token</a></td><td><a href="https://rciam.example.org/oidc/token" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/token</a></td></tr><tr><td>Device Code</td><td><a href="https://rciam-demo.example.org/oidc/devicecode" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/devicecode</a></td><td><a href="https://rciam.example.org/oidc/devicecode" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/devicecode</a></td></tr><tr><td>JSON Web Key(jwt)</td><td><a href="https://rciam-demo.example.org/oidc/jwk" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/jwk</a></td><td><a href="https://rciam.example.org/oidc/jwk" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/jwk</a></td></tr><tr><td>User Info</td><td><a href="https://rciam-demo.example.org/oidc/userinfo" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/userinfo</a></td><td><a href="https://rciam.example.org/oidc/userinfo" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/userinfo</a></td></tr><tr><td>Introspection</td><td><a href="https://rciam-demo.example.org/oidc/introspect" target="_blank" rel="noopener noreferrer">https://rciam-demo.example.org/oidc/introspect</a></td><td><a href="https://rciam.example.org/oidc/introspect" target="_blank" rel="noopener noreferrer">https://rciam.example.org/oidc/introspect</a></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="authorization-endpoint"></a>Authorization Endpoint<a class="hash-link" href="#authorization-endpoint" title="Direct link to heading">#</a></h4><p>The Authorization Endpoint performs Authentication of the End-User. This is done
by sending the User Agent to the Authorization Server\&#x27;s Authorization Endpoint
for Authentication and Authorization, using request parameters defined by OAuth
2.0 and additional parameters and parameter values defined by OpenID Connect.</p><p>The request parameters of the Authorization endpoint are:</p><ul><li><code>client_id</code>: id of the client that ask for authentication to the Authorization
Server.</li><li><code>redirect_uri</code>: URI to which the response will be sent.</li><li><code>scope</code>: A list of attributes that the application requires.</li><li><code>state</code>: Opaque value used to maintain state between the request and the
callback.</li><li><code>response_type</code>: value that determines the authorization processing flow to be
used. For <strong>Authorization Code</strong> grant set <code>response_type=code</code>. This way the
response will include an authorization code.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="token-endpoint"></a>Token Endpoint<a class="hash-link" href="#token-endpoint" title="Direct link to heading">#</a></h4><p>To obtain an Access Token, an ID Token, and optionally a Refresh Token, the
Client sends a Token Request to the Token Endpoint.</p><p>Depending on the grant type, the following parameters are required:</p><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="authorization-code"></a>Authorization Code<a class="hash-link" href="#authorization-code" title="Direct link to heading">#</a></h5><table><thead><tr><th>Parameter</th><th>Presence</th><th>Values</th></tr></thead><tbody><tr><td><code>grant_type</code></td><td>Required</td><td><code>authorization_code</code></td></tr><tr><td><code>code</code></td><td>Required</td><td>The value of the code in the response from authorization endpoint.</td></tr><tr><td><code>redirect_uri</code></td><td>Required</td><td>URI to which the response will be sent (must be the same as the request to authorization endpoint)</td></tr></tbody></table><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="proof-key-for-code-exchange-pkce"></a>Proof Key for Code Exchange (PKCE)<a class="hash-link" href="#proof-key-for-code-exchange-pkce" title="Direct link to heading">#</a></h5><p>The Proof Key for Code Exchange (PKCE, pronounced pixie) extension
(<a href="https://tools.ietf.org/html/rfc7636" target="_blank" rel="noopener noreferrer">RFC 7636</a>) describes a technique for
public clients (clients without <code>client_secret</code>) to mitigate the threat of
having the authorization code intercepted. The technique involves the client
first creating a secret, and then using that secret again when exchanging the
authorization code for an access token. This way if the code is intercepted, it
will not be useful since the token request relies on the initial secret.</p><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="client-configuration"></a>Client configuration<a class="hash-link" href="#client-configuration" title="Direct link to heading">#</a></h6><p>To enable PKCE you need to go to the
<a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">Manage Services Page</a> and create/edit
a client.
In &quot;Protocol&quot; tab under &quot;Token Endpoint Authentication Method&quot; select &quot;No
authentication&quot; and in &quot;Crypto&quot; tab under &quot;Proof Key for Code Exchange (PKCE)
Code Challenge Method&quot; select &quot;SHA-256 hash algorithm&quot;.</p><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="protocol-flow"></a>Protocol Flow<a class="hash-link" href="#protocol-flow" title="Direct link to heading">#</a></h6><p>Because the PKCE-enhanced Authorization Code Flow builds upon the standard
Authorization Code Flow, the steps are very similar.</p><p>First, the client creates and records a secret named the <code>code_verifier</code>. The
<code>code_verifier</code> is a high-entropy cryptographic random STRING using the
unreserved characters [A-Z] / [a-z] / [0-9] / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;, with a
minimum length of 43 characters and a maximum length of 128 characters. Then the
client creates a <code>code_challenge</code> derived from the <code>code_verifier</code> by using one
of the following transformations on the code verifier:</p><ul><li><code>plain</code> code_challenge = code_verifier</li><li><code>S256</code> code_challenge = BASE64URL-ENCODE(SHA256(ASCII(code_verifier)))</li></ul><p>If the client is capable of using <code>S256</code>, it MUST use <code>S256</code>. Clients are
permitted to use <code>plain</code> only if they cannot support <code>S256</code> for some technical
reason.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>There are various tools that generate these values such as
<a href="https://tonyxu-io.github.io/pkce-generator/" target="_blank" rel="noopener noreferrer">https://tonyxu-io.github.io/pkce-generator/</a></p></div></div><p>Then the <code>code_challenge</code> is sent in the Authorization Request along with the
transformation method (<code>code_challenge_method</code>).</p><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">GET </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${AUTHORISATION_ENDPOINT}</span><span class="token string" style="color:#e3116c">?</span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &amp;scope=openid%20profile%20email</span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &amp;redirect_uri=</span><span class="token string variable" style="color:#36acaa">${REDIRECT_URI}</span><span class="token string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &amp;response_type=code</span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &amp;code_challenge=</span><span class="token string variable" style="color:#36acaa">${CODE_CHALLENGE}</span><span class="token string" style="color:#e3116c"></span></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &amp;code_challenge_method=S256&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Authorisation Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>The Authorization Endpoint responds as usual but records <code>code_challenge</code> and
the <code>code_challenge_method</code>.</p><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">302</span><span class="token plain"> Found</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Location: </span><span class="token variable" style="color:#36acaa">${REDIRECT_URI}</span><span class="token plain">?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">fgtLHT</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The client then sends the authorization code in the Access Token Request as
usual but includes the <code>code_verifier</code> secret generated in the first request.</p><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=authorization_code&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;code=</span><span class="token string variable" style="color:#36acaa">${CODE}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;redirect_uri=</span><span class="token string variable" style="color:#36acaa">${REDIRECT_URI}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;code_verifier=</span><span class="token string variable" style="color:#36acaa">${CODE_VERIFIER}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>The authorization server transforms <code>code_verifier</code> and compares it to
<code>code_challenge</code> from the first request. Access is denied if they are not equal.</p><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYWxnIjoiUlMyNTYifQ...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3599</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYWxnIjoiUlMyNTYifQ...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid email profile&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bearer&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="refresh-request"></a>Refresh request<a class="hash-link" href="#refresh-request" title="Direct link to heading">#</a></h5><p>The following request allows obtaining an access token from a refresh token
using the <code>grant_type</code> value <code>refresh_token</code>:</p><table><thead><tr><th>Parameter</th><th>Presence</th><th>Values</th></tr></thead><tbody><tr><td><code>client_id</code></td><td>Required</td><td>The identifier of the client.</td></tr><tr><td><code>client_secret</code></td><td>Required</td><td>The secret value of the client.</td></tr><tr><td><code>grant_type</code></td><td>Required</td><td><code>refresh_token</code></td></tr><tr><td><code>refresh_token</code></td><td>Required</td><td><code>The value of the refresh token</code></td></tr><tr><td><code>scope</code></td><td>Required</td><td>This parameter should contain openid at least</td></tr></tbody></table><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${CLIENT_SECRET}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=refresh_token&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;refresh_token=</span><span class="token string variable" style="color:#36acaa">${REFRESH_TOKEN}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20email%20profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYWx...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3599</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYW...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;refresh_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJhbGciOiJub25...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid profile email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bearer&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="refresh-request-with-pkce"></a>Refresh Request with PKCE<a class="hash-link" href="#refresh-request-with-pkce" title="Direct link to heading">#</a></h6><p>To combine the refresh token grant type with PKCE you need to make the following
request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=refresh_token&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;refresh_token=</span><span class="token string variable" style="color:#36acaa">${REFRESH_TOKEN}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20email%20profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="token-exchange"></a>Token Exchange<a class="hash-link" href="#token-exchange" title="Direct link to heading">#</a></h5><p>To get a token from client B using a token issued for client A, the parameters
of the request are:</p><table><thead><tr><th>Parameter</th><th>Presence</th><th>Values</th></tr></thead><tbody><tr><td><code>grant_type</code></td><td>Required</td><td><code>urn:ietf:params:oauth:grant-type:token-exchange</code></td></tr><tr><td><code>audience</code></td><td>Optional</td><td>Define the logical name of the service that the token will be used for</td></tr><tr><td><code>subject_token</code></td><td>Required</td><td>The value of the access token</td></tr><tr><td><code>subject_token_type</code></td><td>Required</td><td><code>urn:ietf:params:oauth:token-type:access_token</code> (because this feature accepts access tokens only)</td></tr><tr><td><code>scope</code></td><td>Optional</td><td>Define one or more scopes that are contained in the original token; otherwise all scopes will be selected</td></tr></tbody></table><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${CLIENT_B_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${CLIENT_B_SECRET}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=urn:ietf:params:oauth:grant-type:token-exchange&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;audience=tokenExchange&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;subject_token=</span><span class="token string variable" style="color:#36acaa">${ACCESS_TOKEN_A}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;subject_token_type=urn:ietf:params:oauth:token-type:access_token&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20profile%20offline_access&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYWxnIjoiUl...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3599</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJvaWRjIiwiYWxnIjoiUl...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;refresh_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJhbGciOiJub25lIn0.eyJleHAiO...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid profile offline_access&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bearer&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="device-code"></a>Device Code<a class="hash-link" href="#device-code" title="Direct link to heading">#</a></h5><p>The device code flow enables OAuth clients on (input-constrained) devices to
obtain user authorization for accessing protected resources without using an
on-device user-agent, provided that they have an Internet connection.</p><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="1-device-authorization-request"></a>1. Device Authorization Request<a class="hash-link" href="#1-device-authorization-request" title="Direct link to heading">#</a></h6><p>The client initiates the authorization flow by requesting a set of
verification codes from the authorization server by making an HTTP &quot;POST&quot;
request to the device authorization endpoint. The client constructs the request
with the following parameters:</p><table><thead><tr><th>Parameter</th><th>Presence</th><th>Values</th></tr></thead><tbody><tr><td><code>client_id</code></td><td>Required</td><td>The identifier of the client</td></tr><tr><td><code>scope</code></td><td>Optional</td><td>Define one or more scopes that are contained in the original token; otherwise all scopes will be selected</td></tr></tbody></table><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${DEVICE_CODE_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20email%20profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Device Code Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;device_code&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c4341bd6-5e82-4f9c-9f6f-5842409d48db&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;user_code&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;IEJSJB&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;verification_uri&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://rciam.example.org/oidc/device&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="2-user-interaction"></a>2. User Interaction<a class="hash-link" href="#2-user-interaction" title="Direct link to heading">#</a></h6><p>After receiving a successful Authorization Response, the client displays or
otherwise communicates the <code>user_code</code> and the <code>verification_uri</code> to the end
user and instructs them to visit the URI in a user agent on a secondary
device (for example, in a browser on their mobile phone), and enter the
user code.</p><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="3-device-access-token-request"></a>3. Device Access Token Request<a class="hash-link" href="#3-device-access-token-request" title="Direct link to heading">#</a></h6><p>After displaying instructions to the user, the client makes an Access Token
Request to the token endpoint. The request contains the following parameters:</p><table><thead><tr><th>Parameter</th><th>Presence</th><th>Values</th></tr></thead><tbody><tr><td><code>grant_type</code></td><td>Required</td><td><code>urn:ietf:params:oauth:grant-type:device_code</code></td></tr><tr><td><code>device_code</code></td><td>Required</td><td>The device verification code, <code>device_code</code> from the Device Authorization Response</td></tr><tr><td><code>client_id</code></td><td>Required</td><td>The identifier of the client</td></tr><tr><td><code>client_secret</code></td><td>Required</td><td>The secret value of the client</td></tr><tr><td><code>scope</code></td><td>Optional</td><td>Define one or more scopes that are contained in the original token; otherwise all scopes will be selected</td></tr></tbody></table><p>Example request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;device_code=</span><span class="token string variable" style="color:#36acaa">${DEVICE_CODE}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_secret=</span><span class="token string variable" style="color:#36acaa">${CLIENT_SECRET}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>Example response:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJyc2ExIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiJhZG1pbiIs...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3599</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJraWQiOiJyc2ExIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI5MDM0Mi...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid profile&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bearer&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h6><a aria-hidden="true" tabindex="-1" class="anchor anchor__h6 anchorWithStickyNavbar_31ik" id="device-code-with-pkce"></a>Device Code with PKCE<a class="hash-link" href="#device-code-with-pkce" title="Direct link to heading">#</a></h6><p>To combine Device Code flow with PKCE you need to make the following requests:</p><p>1 - Device Authorization Request:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${DEVICE_CODE_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;scope=openid%20email%20profile&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;code_challenge=</span><span class="token string variable" style="color:#36acaa">${CODE_CHALLENGE}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;code_challenge_method=S256&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Device Code Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><p>2 - Device Access Token Request</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${TOKEN_ENDPOINT}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;device_code=</span><span class="token string variable" style="color:#36acaa">${DEVICE_CODE}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;client_id=</span><span class="token string variable" style="color:#36acaa">${CLIENT_ID}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&quot;code_verifier=</span><span class="token string variable" style="color:#36acaa">${CODE_VERIFIER}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> python -m json.tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can find the <em>Token Endpoint</em> in the <a href="#endpoints">Endpoints</a> table.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="claims-based-authorisation"></a>Claims-based authorisation<a class="hash-link" href="#claims-based-authorisation" title="Direct link to heading">#</a></h3><p>RCIAM provides information about the authenticated user that may be used
by Service Providers in order to control user access to resources. This
information is provided by the RCIAM OIDC Provider in the form of
<a href="#claims">OIDC claims</a>. The table below lists the claims that are relevant for
user authorisation:</p><table><thead><tr><th>Description</th><th>OIDC Claim</th></tr></thead><tbody><tr><td><a href="#vogroup-membership-and-role-information">VO/group membership/roles of the authenticated user</a></td><td><code>eduperson_entitlement</code></td></tr><tr><td><a href="#capabilities">Capabilities</a></td><td><code>eduperson_entitlement</code></td></tr><tr><td><a href="#identity-assurance">Identity Assurance</a></td><td><code>eduperson_assurance</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="example-oidc-client"></a>Example OIDC Client<a class="hash-link" href="#example-oidc-client" title="Direct link to heading">#</a></h3><p>In this guide we will demonstrate how to install and configure a
<a href="https://github.com/rciam/simple-oidc-client-php" target="_blank" rel="noopener noreferrer">Simple OIDC Client</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="install-simple-oidc-client-php"></a>Install simple-oidc-client-php<a class="hash-link" href="#install-simple-oidc-client-php" title="Direct link to heading">#</a></h4><p>This guide assumes the Apache HTTP server has been installed and the document
root is <code>/var/www/html</code></p><p>Move to the apache document root and download and extract
<a href="https://github.com/rciam/simple-oidc-client-php/releases/download/v2.0.0/simple-oidc-client-php-v2.0.0.zip" target="_blank" rel="noopener noreferrer">simple-oidc-client-php-v2.0.0.zip</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="configure-client"></a>Configure Client<a class="hash-link" href="#configure-client" title="Direct link to heading">#</a></h4><p>Login to the <a href="https://federation-demo.rciam.grnet.gr" target="_blank" rel="noopener noreferrer">RCIAM Federation Registry</a></p><p>Then create a new service or edit your existing service. In <code>General</code> tab fill
all the required fields. For <code>Integration Environment</code> select <code>Demo</code>. In
<code>Protocol Specific</code> tab select as Protocol the <code>OIDC Service</code> and then in the
<code>Redirect URI(s)</code> insert your simple-oidc-client-php URL (e.g.
<code>http://localhost/simple-oidc-client-php/refreshtoken.php</code>). This URL must link
to <code>refreshtoken.php</code> which is located in simple-oidc-client-php directory.
Next, in <code>Scope</code> select the scopes that your service needs. Then, submit the
form and and self approve it. Finally you should get a pair of <code>Client ID</code> and
<code>Client Secret</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="configure-simple-oidc-client-php"></a>Configure simple-oidc-client-php<a class="hash-link" href="#configure-simple-oidc-client-php" title="Direct link to heading">#</a></h4><p>Now that you have everything you need, you can configure your login settings. Go
to your terminal and open <code>config.php</code> with your favorite text editor.</p><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> simple-oidc-client-php/config.php</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s go quickly through the settings:</p><ul><li><code>title</code> required, the title on the navigation bar</li><li><code>img</code> required, the source of the logo</li><li><code>scope_info</code> optional, a message that informs the user for the application
requirements</li><li><code>issuer</code> required, the base URL of our IdentityServer instance. This will
allow oidc-client to query the metadata endpoint so it can validate the tokens</li><li><code>client_id</code> required, the id of the client we want to use when hitting the
authorization endpoint</li><li><code>client_secret</code> optional, a value the offers better security to the message
flow</li><li><code>pkceCodeChallengeMethod</code> optional, a string that defines the code challenge
method for PKCE. Choose between <code>plain</code> or <code>S256</code>.</li><li><code>redirect_url</code> required, the redirect URL where the client and the browser
agree to send and receive correspondingly the code</li><li><code>scopesDefine</code> required, defines the scopes the client supports</li><li><code>refresh_token_note</code> optional, info for the refresh token</li><li><code>access_token_note</code> optional, info for the access token</li><li><code>manage_token_note</code> optional, message the informs the user where can manage
his tokens</li><li><code>manageTokens</code> optional, URL of the manage tokens service</li><li><code>sessionName</code> required, define the name of the cookie session</li><li><code>sessionLifetime</code> required, define the duration of the session. This must be
equal to the validity time of the access token.</li></ul><p>You must change the followings options based on your Service configuration you
setup earlier:</p><ul><li><code>issuer</code></li><li><code>client_id</code></li><li><code>client_secret</code></li><li><code>redirect_url</code></li><li><code>scopesDefine</code></li><li><code>sessionName</code> (based on the installation path of the portal)</li></ul><p>An example configuration follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// index.php interface configuration</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$title = &quot;Generate Tokens&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$img = &quot;https://clickhelp.co/images/feeds/blog/2016.05/keys.jpg&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$scope_info = &quot;This service requires the following permissions for your account:&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Client configuration</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$issuer = &quot;https://rciam-demo.example.org/oidc/&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$client_id = &quot;CHANGE_ME&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$client_secret = &quot;CHANGE_ME&quot;;  // comment if you are using PKCE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// $pkceCodeChallengeMethod = &quot;S256&quot;;   // uncomment to use PKCE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$redirect_url = &quot;http://localhost/simple-oidc-client-php/refreshtoken.php&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// add scopes as keys and a friendly message of the scope as value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$scopesDefine = array(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;openid&#x27; =&gt; &#x27;log in using your identity&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;email&#x27; =&gt; &#x27;read your email address&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;profile&#x27; =&gt; &#x27;read your basic profile info&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// refreshtoken.php interface configuration</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$refresh_token_note = &quot;NOTE: New refresh tokens expire in 12 months.&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$access_token_note = &quot;NOTE: New access tokens expire in 1 hour.&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$manage_token_note = &quot;You can manage your refresh tokens in the following link: &quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$manageTokens = $issuer . &quot;manage/user/services&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$sessionName = &quot;simple-oidc-client-php&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$sessionLifetime = 60*60;  // must be equal to access token validation time in seconds</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="user-attributes"></a>User attributes<a class="hash-link" href="#user-attributes" title="Direct link to heading">#</a></h2><p>This section defines the attributes that can be made available to services
connected to RCIAM.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1-rciam-id"></a>1. RCIAM ID<a class="hash-link" href="#1-rciam-id" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">RCIAM ID</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">An identifier for the user, unique among all RCIAM accounts and never reused</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>1.3.6.1.4.1.5923.1.1.1.13</code> (eduPersonUniqueId)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>openid</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>sub</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>ID token</li><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM assigns this attribute on user registration</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">No</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">No</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em><a href="mailto:ef72285491ffe53c39b75bdcef46689f5d26ddfa00312365cc4fb5ce97e9ca87@example.org" target="_blank" rel="noopener noreferrer">ef72285491ffe53c39b75bdcef46689f5d26ddfa00312365cc4fb5ce97e9ca87@example.org</a></em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">Use <strong>RCIAM ID</strong> within your application as the unique-identifier key for the user</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2-display-name"></a>2. Display Name<a class="hash-link" href="#2-display-name" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Display Name</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s full name, in a displayable form</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:2.16.840.1.113730.3.1.241</code> (displayName)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>profile</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>name</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left">Userinfo endpoint</td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Provided by user&#x27;s Identity Provider</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>John Doe</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="3-given-name"></a>3. Given Name<a class="hash-link" href="#3-given-name" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Given Name</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s first name</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:2.5.4.42</code> (givenName)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>profile</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>given_name</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left">Userinfo endpoint</td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Provided by user&#x27;s Identity Provider</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>John</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="4-family-name"></a>4. Family Name<a class="hash-link" href="#4-family-name" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Family Name</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s last name</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:2.5.4.4</code> (sn)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>profile</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>family_name</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left">Userinfo endpoint</td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Provided by user&#x27;s Identity Provider</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>Doe</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="5-username"></a>5. Username<a class="hash-link" href="#5-username" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Username</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The username by which the user wishes to be referred to</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:0.9.2342.19200300.100.1.1</code> (uid)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>profile</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>preferred_username</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>ID token</li><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM assigns this attribute on user registration</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">No</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>jdoe</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">The Service Provider <strong>MUST NOT</strong> rely upon this value being unique</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="6-email-address"></a>6. Email Address<a class="hash-link" href="#6-email-address" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Email Address</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s email address</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:0.9.2342.19200300.100.1.3</code> (mail)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>email</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>email</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Provided by user&#x27;s Identity Provider</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em><a href="mailto:john.doe@example.org" target="_blank" rel="noopener noreferrer">john.doe@example.org</a></em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">This <strong>MAY NOT</strong> be unique and is <strong>NOT</strong> suitable for use as a primary key</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="7-verified-email-flag"></a>7. Verified email flag<a class="hash-link" href="#7-verified-email-flag" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Verified email flag</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">True if the user&#x27;s email address has been verified; otherwise false</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left">See <a href="#8-verified-email-list">Verified email list</a></td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>email</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>email_verified</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM assigns this attribute on user registration</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Single-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>true</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">This claim is available only in OpenID Connect</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="8-verified-email-list"></a>8. Verified email list<a class="hash-link" href="#8-verified-email-list" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Verified email list</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">A list of user&#x27;s email addresses that have been verified</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.25178.4.1.14</code> (voPersonVerifiedEmail)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>email</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>voperson_verified_email</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM or the user&#x27;s Identity Provider</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Not always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><ul><li><a href="mailto:_john.doe@example.org_" target="_blank" rel="noopener noreferrer">_john.doe@example.org_</a></li><li><a href="mailto:_jdoe@example.com_" target="_blank" rel="noopener noreferrer">_jdoe@example.com_</a></li></ul></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Experimental</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="9-affiliation"></a>9. Affiliation<a class="hash-link" href="#9-affiliation" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Affiliation</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s affiliation within a particular security domain (scope)</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.5923.1.1.1.9</code> (eduPersonScopedAffiliation)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>eduperson_scoped_affiliation</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>eduperson_scoped_affiliation</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM assigns this attribute on user registration</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em><a href="mailto:member@example.org" target="_blank" rel="noopener noreferrer">member@example.org</a></em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">Service Providers are encouraged to validate the scope of this attribute</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="10-groups"></a>10. Groups<a class="hash-link" href="#10-groups" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Groups</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">The user&#x27;s group/VO membership/role information expressed as entitlements</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</code> (eduPersonEntitlement)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>eduperson_entitlement</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>eduperson_entitlement</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Group memberships are managed by group administrators</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Not always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>urn:mace:example.org:group:vo.example.org:role=vm_operator#rciam.example.org</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="11-capabilities"></a>11. Capabilities<a class="hash-link" href="#11-capabilities" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Capabilities</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">This attribute describes the resource or child-resource a user is allowed to access, optionally specifying certain actions the user is entitled to perform, as described in <a href="https://aarc-community.org/guidelines/aarc-g027/" target="_blank" rel="noopener noreferrer">AARC-G027</a></td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</code> (eduPersonEntitlement)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>eduperson_entitlement</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>eduperson_entitlement</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Capabilities are managed by RCIAM</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Not always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>urn:mace:example.org:res:example-res#rciam.example.org</em></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="12-assurance"></a>12. Assurance<a class="hash-link" href="#12-assurance" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">Assurance</th><th></th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">Assurance of the identity of the user, following <a href="https://refeds.org/assurance" target="_blank" rel="noopener noreferrer">REFEDS Assurance Framework (RAF)</a> and the <a href="#level-of-assurance">RCIAM AAI Assurance Profiles</a>. The following RAF values are qualified and automatically set for all Community identities:<ul><li>$PREFIX$</li><li>$PREFIX$/ID/unique</li><li>$PREFIX$/ID/eppn-unique-no-reassign</li><li>$PREFIX$/IAP/low</li><li>$PREFIX$/ATP/ePA-1m</li><li>$PREFIX$/ATP/ePA-1d</li></ul>Following RAF values are set if the currently used authentication provider asserts (or otherwise qualifies to) them:<ul><li>$PREFIX$/IAP/medium</li><li>$PREFIX$/IAP/high</li></ul>The following compound profiles are asserted if the user qualifies to them<ul><li>$PREFIX$/profile/cappuccino</li><li>$PREFIX$/profile/espresso</li></ul></td><td></td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.5923.1.1.1.11</code> (eduPersonAssurance)</td><td></td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>eduperson_assurance</code></td><td></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>eduperson_assurance</code></td><td></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left"><ul><li>Userinfo endpoint</li><li>Introspection endpoint</li></ul></td><td></td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">RCIAM assigns this attribute on user registration</td><td></td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td><td></td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td><td></td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Not always</td><td></td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><em>[<code>https://rciam.example.org/LoA#Low</code>, <code>https://refeds.org/assurance/IAP/low</code>]</em></td><td></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td><td></td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Stable</td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="13-ssh-public-key"></a>13. SSH Public Key<a class="hash-link" href="#13-ssh-public-key" title="Direct link to heading">#</a></h3><table><thead><tr><th align="right">attribute name</th><th align="left">SSH Public Key</th></tr></thead><tbody><tr><td align="right"><strong>description</strong></td><td align="left">Provides information about the user&#x27;s SSH public key(s)</td></tr><tr><td align="right"><strong>SAML Attribute(s)</strong></td><td align="left"><code>urn:oid:1.3.6.1.4.1.24552.500.1.1.1.13</code> (sshPublicKey)</td></tr><tr><td align="right"><strong>OIDC scope</strong></td><td align="left"><code>ssh_public_key</code></td></tr><tr><td align="right"><strong>OIDC claim(s)</strong></td><td align="left"><code>ssh_public_key</code></td></tr><tr><td align="right"><strong>OIDC claim location</strong></td><td align="left">Userinfo endpoint</td></tr><tr><td align="right"><strong>origin</strong></td><td align="left">Added SSH public key(s) in user&#x27;s RCIAM Profile</td></tr><tr><td align="right"><strong>changes</strong></td><td align="left">Yes</td></tr><tr><td align="right"><strong>multiplicity</strong></td><td align="left">Multi-valued</td></tr><tr><td align="right"><strong>availability</strong></td><td align="left">Not always</td></tr><tr><td align="right"><strong>example</strong></td><td align="left"><code>ssh-rsa AAAAB3NzaC...qxxEEipdnZ nikosev@grnet-hq.admin.grnet.gr</code></td></tr><tr><td align="right"><strong>notes</strong></td><td align="left">-</td></tr><tr><td align="right"><strong>status</strong></td><td align="left">Experimental</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="user-authorisation"></a>User authorisation<a class="hash-link" href="#user-authorisation" title="Direct link to heading">#</a></h2><p>The following information about the authenticated user can be provided by
RCIAM in order to control user access to resources:</p><ol><li>VO/group membership and role information about the authenticated user</li><li>Capabilities</li><li>Identity Assurance</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="vogroup-membership-and-role-information"></a>VO/group membership and role information<a class="hash-link" href="#vogroup-membership-and-role-information" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h4><p>VO/group membership and role information is encoded in entitlements
(<code>eduPersonEntitlement</code> attribute values in SAML or <code>eduperson_entitlement</code>
claim in OIDC). These entitlements are typically used to indicate access rights
to protected resources. Entitlements are multi-valued, with each value formatted
as a URN.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="syntax"></a>Syntax<a class="hash-link" href="#syntax" title="Direct link to heading">#</a></h4><p>An entitlement value expressing group membership and role information has the
following syntax (components enclosed in square brackets are OPTIONAL):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">urn:mace:example.org:group:&lt;GROUP&gt;[:&lt;SUBGROUP&gt;*][:role=&lt;ROLE&gt;]#&lt;GROUP-AUTHORITY&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>where:</p><ul><li><code>&lt;GROUP&gt;</code> is the name of a VO, research collaboration or a top level arbitrary
group. <code>&lt;GROUP&gt;</code> names are unique within the <code>urn:mace:example.org:group</code>
namespace;</li><li>zero or more <code>&lt;SUBGROUP&gt;</code> components represent the hierarchy of subgroups in
the <code>&lt;GROUP&gt;</code>; specifying sub-groups is optional</li><li>the optional <code>&lt;ROLE&gt;</code> component is scoped to the rightmost (sub)group; if no
group information is specified, the role applies to the VO</li><li><code>&lt;GROUP-AUTHORITY&gt;</code> is a non-empty string that indicates the authoritative
source for the entitlement value. For example, it can be the FQDN of the group
management system that is responsible for the identified group membership
information</li></ul><p><strong>Example:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">urn:mace:example.org:group:vo.example.org:role=vm_operator#rciam.example.org</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="capabilities"></a>Capabilities<a class="hash-link" href="#capabilities" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="background-1"></a>Background<a class="hash-link" href="#background-1" title="Direct link to heading">#</a></h4><p>The user&#x27;s capability information is encoded in entitlements
(<code>eduPersonEntitlement</code> attribute values in SAML or <code>eduperson_entitlement</code>
claim in OIDC). These entitlements are typically used to indicate access rights
to protected resources. Entitlements are multi-valued, with each value formatted
as a URN following the syntax defined in
<a href="https://aarc-community.org/guidelines/aarc-g027/" target="_blank" rel="noopener noreferrer">AARC-G027</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="syntax-1"></a>Syntax<a class="hash-link" href="#syntax-1" title="Direct link to heading">#</a></h4><p>An entitlement value expressing a capability has the following syntax
(components enclosed in square brackets are OPTIONAL):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;NAMESPACE&gt;:res:&lt;RESOURCE&gt;[:&lt;CHILD-RESOURCE&gt;]...[:act:&lt;ACTION&gt;[,&lt;ACTION&gt;]...]#&lt;AUTHORITY&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>where:</p><ul><li><p><code>&lt;NAMESPACE&gt;</code> is controlled by the e-infrastructure, research infrastructure
or research collaboration that manages the capability. The <code>&lt;NAMESPACE&gt;</code> of
capabilities managed by RCIAM is set to <code>urn:mace:example.org</code>, while,
generally, it is in the form of
<code>urn:&lt;NID&gt;:&lt;DELEGATED-NAMESPACE&gt;[:&lt;SUBNAMESPACE&gt;]...</code> where:</p><ul><li><p><code>&lt;NID&gt;</code> is the namespace identifier associated with a URN namespace
registered with IANA2, ensuring global uniqueness. Implementers SHOULD use
one of the existing registered URN namespaces, such as
<code>urn:mace</code>[<a href="https://incommon.org/community/mace-registries/mace-urn-registry/" target="_blank" rel="noopener noreferrer">MACE</a>].</p></li><li><p><code>&lt;DELEGATED-NAMESPACE&gt;</code> is a URN sub-namespace delegated from one of the
IANA registered NIDs to an organisation representing the e-infrastructure,
research infrastructure or research collaboration. It is RECOMMENDED that a
publicly accessible URN value registry for each delegated namespace be
provided.</p></li></ul></li><li><p>The literal string <code>&quot;res&quot;</code> indicates that this is a resource-specific
entitlement as opposed to, for example, an entitlement used for expressing
group membership
<a href="https://aarc-community.org/guidelines/aarc-g002/" target="_blank" rel="noopener noreferrer">AARC-G002</a>.</p></li><li><p><code>&lt;RESOURCE&gt;</code> is the name of the resource. Whether the name should be unique is
an implementation decision.</p></li><li><p>An optional list of colon-separated <code>&lt;CHILD-RESOURCE&gt;</code> components represents a
specific branch of the hierarchy of resources under the identified
<code>&lt;RESOURCE&gt;</code>.</p></li><li><p>An optional list of comma-separated <code>&lt;ACTION&gt;</code>s MAY be included, which, if
present, MUST be prefixed with the literal string “act”. This component MAY be
used for further specifying the actions a user is entitled to do at a given
resource. Note that the list of <code>&lt;ACTION&gt;</code>s is scoped to the rightmost
child-resource; if no child-resource information is specified, actions apply
to the top level resource. The interpretation of a capability without actions
specified is an implementation detail.</p></li><li><p><code>&lt;AUTHORITY&gt;</code> is a mandatory and non-empty string that indicates the
authoritative source of the capability. This SHOULD be used to further specify
the exact issuing instance. For example, it MAY be the FQDN of the service
that issued that specific capability. The <code>&lt;AUTHORITY&gt;</code> is specified in the
f-component <a href="https://tools.ietf.org/html/rfc8141" target="_blank" rel="noopener noreferrer">RFC8141</a> of the URN; thus,
it is introduced by the number sign (&quot;#&quot;) character and terminated by the end
of the URN. All characters must be encoded according to
<a href="https://tools.ietf.org/html/rfc8141" target="_blank" rel="noopener noreferrer">RFC8141</a>. Hence, the <code>&lt;AUTHORITY&gt;</code> MUST
NOT be considered when determining equivalence (Section 3 in
<a href="https://tools.ietf.org/html/rfc8141" target="_blank" rel="noopener noreferrer">RFC8141</a>) of URN-formatted capabilities.
The <code>&lt;AUTHORITY&gt;</code> of capabilities managed by RCIAM is typically set to
<code>rciam.example.org</code>.</p></li></ul><p><strong>Example:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">urn:mace:example.org:res:example-res#rciam.example.org</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="identity-assurance"></a>Identity Assurance<a class="hash-link" href="#identity-assurance" title="Direct link to heading">#</a></h3><p>Based on the authentication method selected by the user, the RCIAM proxy
assigns a Identity Assurance, which is conveyed to the SP through both the
<code>eduPersonAssurance</code> attribute and the Authentication Context Class
(<code>AuthnContextClassRef</code>) of the SAML authentication response. RCIAM uses
Assurance Profiles which distinguish between three Identity Assurance levels,
similarly to the
<a href="http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=OJ:JOL_2015_235_R_0002" target="_blank" rel="noopener noreferrer">eID Assurance Framework (eIDAF)</a>.
Each level is represented by a URI as follows:</p><ul><li><strong>Low</strong>: Authentication through a social identity provider or other low
identity assurance provider: <code>https://rciam.example.org/LoA#Low</code></li><li><strong>Substantial</strong>: Password/X.509 authentication at the user\&#x27;s home IdP:
<code>https://rciam.example.org/LoA#Substantial</code></li><li><strong>High</strong>: Substantial + multi-factor authn (not yet supported, TBD):
<code>https://rciam.example.org/LoA#High</code></li></ul><p>Moreover, RCIAM follows the
<a href="https://wiki.refeds.org/display/ASS/REFEDS+Assurance+Framework+ver+1.0" target="_blank" rel="noopener noreferrer">REFEDS Assurance framework (RAF)</a>.
The RCIAM conveys any RAF values provided by the IdP directly to the SP,
through the aforementioned methods. Furthermore, RCIAM will append into the
User&#x27;s profile any additional LoA, if the user is eligible for it. For example,
a user having a Verified Email is eligible for the RAF value
<code>https://refeds.org/assurance/IAP/low</code></p><p>Some RCIAM SPs have been configured to provide limited access (or not to accept at
all) credentials with the Low LoA.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/developer/guide-for-sps.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rciam-docs/docs/manager/voms"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« VOMS</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rciam-docs/docs/developer/guide-for-idps"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Identity Providers »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-provider-integration-workflow" class="table-of-contents__link">Service Provider integration workflow</a></li><li><a href="#general-information" class="table-of-contents__link">General Information</a></li><li><a href="#saml-service-provider" class="table-of-contents__link">SAML Service Provider</a><ul><li><a href="#metadata-registration" class="table-of-contents__link">Metadata registration</a></li><li><a href="#metadata" class="table-of-contents__link">Metadata</a></li><li><a href="#attributes" class="table-of-contents__link">Attributes</a></li><li><a href="#attribute-based-authorisation" class="table-of-contents__link">Attribute-based authorisation</a></li><li><a href="#references" class="table-of-contents__link">References</a></li></ul></li><li><a href="#openid-connect-service-provider" class="table-of-contents__link">OpenID Connect Service Provider</a><ul><li><a href="#client-registration" class="table-of-contents__link">Client registration</a></li><li><a href="#claims" class="table-of-contents__link">Claims</a></li><li><a href="#grant-types" class="table-of-contents__link">Grant Types</a></li><li><a href="#endpoints" class="table-of-contents__link">Endpoints</a></li><li><a href="#claims-based-authorisation" class="table-of-contents__link">Claims-based authorisation</a></li><li><a href="#example-oidc-client" class="table-of-contents__link">Example OIDC Client</a></li></ul></li><li><a href="#user-attributes" class="table-of-contents__link">User attributes</a><ul><li><a href="#1-rciam-id" class="table-of-contents__link">1. RCIAM ID</a></li><li><a href="#2-display-name" class="table-of-contents__link">2. Display Name</a></li><li><a href="#3-given-name" class="table-of-contents__link">3. Given Name</a></li><li><a href="#4-family-name" class="table-of-contents__link">4. Family Name</a></li><li><a href="#5-username" class="table-of-contents__link">5. Username</a></li><li><a href="#6-email-address" class="table-of-contents__link">6. Email Address</a></li><li><a href="#7-verified-email-flag" class="table-of-contents__link">7. Verified email flag</a></li><li><a href="#8-verified-email-list" class="table-of-contents__link">8. Verified email list</a></li><li><a href="#9-affiliation" class="table-of-contents__link">9. Affiliation</a></li><li><a href="#10-groups" class="table-of-contents__link">10. Groups</a></li><li><a href="#11-capabilities" class="table-of-contents__link">11. Capabilities</a></li><li><a href="#12-assurance" class="table-of-contents__link">12. Assurance</a></li><li><a href="#13-ssh-public-key" class="table-of-contents__link">13. SSH Public Key</a></li></ul></li><li><a href="#user-authorisation" class="table-of-contents__link">User authorisation</a><ul><li><a href="#vogroup-membership-and-role-information" class="table-of-contents__link">VO/group membership and role information</a></li><li><a href="#capabilities" class="table-of-contents__link">Capabilities</a></li><li><a href="#identity-assurance" class="table-of-contents__link">Identity Assurance</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://grnet.gr" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/rciam-docs/img/grnet-logo.png" alt="grnet-logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/rciam-docs/img/grnet-logo.png" alt="grnet-logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2016-2024 <a href="http://www.grnet.gr/"> GRNET </a></div></div></div></footer></div>
<script src="/rciam-docs/assets/js/runtime~main.d3e33a5e.js"></script>
<script src="/rciam-docs/assets/js/main.a47723e3.js"></script>
</body>
</html>